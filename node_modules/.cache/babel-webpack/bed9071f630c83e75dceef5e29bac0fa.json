{"ast":null,"code":"import _asyncToGenerator from \"/Users/jlw/Documents/frontBatiuni/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nexport class Destroy$ {\n  constructor() {\n    this.destroy$ = new Subject();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n}\n\nDestroy$.ɵfac = function Destroy$_Factory(t) {\n  return new (t || Destroy$)();\n};\n\nDestroy$.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: Destroy$\n});\nexport class IndexBased {\n  constructor() {\n    this._index = 0;\n    this.indexChange = new EventEmitter();\n  }\n\n  get index() {\n    return this._index;\n  }\n\n  set index(value) {\n    if (this._index == value) return;\n    this.indexChanged(value - this.index); //will set the index\n\n    this.indexChange.emit(this.index);\n  }\n\n  get first() {\n    return this._index == 0;\n  }\n\n}\n\nIndexBased.ɵfac = function IndexBased_Factory(t) {\n  return new (t || IndexBased)();\n};\n\nIndexBased.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: IndexBased,\n  inputs: {\n    index: \"index\"\n  },\n  outputs: {\n    indexChange: \"indexChange\"\n  }\n});\n;\nexport class AnimateCSS extends IndexBased {\n  constructor(factoryResolver, view) {\n    super();\n    this.factoryResolver = factoryResolver;\n    this.view = view;\n  }\n\n  create(what, type, ctx = {}) {\n    return type == 'component' ? this.createComponent(what) : this.createTemplate(what, ctx);\n  }\n\n  createTemplate(template, ctx = {}) {\n    let view = this.view.createEmbeddedView(template, ctx);\n    return {\n      element: view.rootNodes[0],\n      view\n    };\n  }\n\n  createComponent(component) {\n    let factory = this.factoryResolver.resolveComponentFactory(component),\n        componentRef = this.view.createComponent(factory);\n    return {\n      element: componentRef.location.nativeElement,\n      view: componentRef.hostView\n    };\n  }\n\n  animateWithClass(element, className, callback) {\n    var _a;\n\n    if (element.parentElement) element.parentElement.scrollTop = 0;\n    element.scrollTop = 0;\n    (_a = element.classList) === null || _a === void 0 ? void 0 : _a.add(className);\n    let save = element.onanimationend;\n\n    element.onanimationend = e => {\n      save && save.call(element, e);\n      element.onanimationend = save;\n      callback === null || callback === void 0 ? void 0 : callback(element, e);\n      element.classList.remove(className);\n    };\n  }\n\n}\n\nAnimateCSS.ɵfac = function AnimateCSS_Factory(t) {\n  return new (t || AnimateCSS)(i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.ViewContainerRef));\n};\n\nAnimateCSS.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: AnimateCSS,\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n;\nexport class UIOpenMenu {\n  constructor() {\n    this.initialized = false;\n    this._open = false;\n    this.block = true;\n    this.openChange = new EventEmitter();\n  }\n\n  get open() {\n    return this._open;\n  }\n\n  set open(value) {\n    if (!this.initialized) {\n      this.initialized = true;\n      this._open = value;\n      return;\n    }\n\n    if (value == this._open) return;\n\n    if (value) {\n      if (this.block) document.body.classList.add('blocked');\n      this._open = value;\n    } else {\n      if (this.block) document.body.classList.remove('blocked'); //this._open = false;\n\n      this.close();\n    }\n  }\n\n}\n\nUIOpenMenu.ɵfac = function UIOpenMenu_Factory(t) {\n  return new (t || UIOpenMenu)();\n};\n\nUIOpenMenu.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: UIOpenMenu,\n  hostVars: 2,\n  hostBindings: function UIOpenMenu_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"open\", ctx._open);\n    }\n  },\n  inputs: {\n    block: \"block\",\n    open: \"open\"\n  },\n  outputs: {\n    openChange: \"openChange\"\n  }\n});\n;\nexport class DimensionMenu extends UIOpenMenu {\n  constructor() {\n    super();\n    this.dimension = {\n      left: '0',\n      top: '0'\n    };\n  }\n\n  get dimensionX() {\n    return this.dimension.left;\n  }\n\n  get dimensionY() {\n    return this.dimension.top;\n  }\n\n  get width() {\n    return this.dimension.width || '100%';\n  }\n\n  get height() {\n    return this.dimension.height || '100%';\n  }\n\n}\n\nDimensionMenu.ɵfac = function DimensionMenu_Factory(t) {\n  return new (t || DimensionMenu)();\n};\n\nDimensionMenu.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: DimensionMenu,\n  hostVars: 8,\n  hostBindings: function DimensionMenu_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"left\", ctx.dimensionX)(\"top\", ctx.dimensionY)(\"width\", ctx.width)(\"height\", ctx.height);\n    }\n  },\n  inputs: {\n    dimension: \"dimension\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n; //Very important class, should be fine for now\n//valueChange is trigged whenever the value changes\n//there should be another event for stuff that come from the DOM\n//because now we have to rely on other events like (click) etc to get user action\n//this won't cause issue but it will feel like dodging bullets once to start doing\n//something unorthodox\n\nexport class UIDefaultAccessor {\n  constructor(cd) {\n    this.cd = cd;\n    this.valueChange = new EventEmitter();\n    this.isDisabled = false;\n\n    this.onTouched = () => {};\n\n    this.onChanged = value => {};\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(value) {\n    this.set(value);\n  }\n\n  get tabIndex() {\n    return 0;\n  }\n\n  $onTouched() {\n    this.onTouched();\n  }\n\n  set(next, notifyForm = true) {\n    if (next !== this.value) {\n      this.valueChange.emit(this._value = next);\n      if (notifyForm) this.onChanged(this.value);\n      this.cd.markForCheck();\n    } //apparently skipping this call breaks everything\n\n\n    this.$onTouched();\n  }\n\n  onChange(e) {\n    var _a;\n\n    if (this.isDisabled) {\n      (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n      return;\n    }\n\n    this.set(this.getInput(e));\n    return this.value;\n  }\n\n  //default implementation\n  getInput(e) {\n    return e;\n  }\n\n  set disabled(disabled) {\n    if (disabled != null) this.isDisabled = true;else this.isDisabled = false;\n  }\n\n  setDisabledState(isDisabled) {\n    this.isDisabled = isDisabled;\n  }\n\n  registerOnTouched(onTouched) {\n    this.onTouched = onTouched;\n  }\n\n  writeValue(value) {\n    if (value === void 0) return;\n    this.set(value, false);\n  }\n\n  registerOnChange(onChanged) {\n    this.onChanged = onChanged;\n  }\n\n}\n\nUIDefaultAccessor.ɵfac = function UIDefaultAccessor_Factory(t) {\n  return new (t || UIDefaultAccessor)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nUIDefaultAccessor.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: UIDefaultAccessor,\n  hostVars: 1,\n  hostBindings: function UIDefaultAccessor_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"blur\", function UIDefaultAccessor_blur_HostBindingHandler() {\n        return ctx.$onTouched();\n      });\n    }\n\n    if (rf & 2) {\n      i0.ɵɵattribute(\"tabindex\", ctx.tabIndex);\n    }\n  },\n  inputs: {\n    value: \"value\",\n    disabled: \"disabled\"\n  },\n  outputs: {\n    valueChange: \"valueChange\"\n  }\n});\n;\nexport class UIAsyncAccessor extends UIDefaultAccessor {\n  constructor(cd) {\n    super(cd);\n  }\n\n  getInput(e) {\n    return super.getInput(e);\n  }\n\n  onChange(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if (_this.isDisabled) {\n        (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n        return;\n      }\n\n      let next = yield _this.getInput(e);\n\n      _this.set(next);\n    })();\n  }\n\n}\n\nUIAsyncAccessor.ɵfac = function UIAsyncAccessor_Factory(t) {\n  return new (t || UIAsyncAccessor)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nUIAsyncAccessor.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: UIAsyncAccessor,\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n; //make it compatible with references ??\n\nexport const PropertyTrap = {\n  get(target, property) {\n    const path = property.split('.');\n    let root = target;\n\n    for (const field of path) {\n      if (root[field]) root = root[field];else return undefined;\n    }\n\n    ;\n    return root;\n  },\n\n  set(target, property, value) {\n    const path = property.split('.'),\n          lastField = path[path.length - 1];\n    let root = target;\n\n    for (const field of path.slice(0, -1)) {\n      if (root[field]) root = root[field];else root = root[field] = {};\n    }\n\n    root[lastField] = value;\n    return true;\n  }\n\n};","map":{"version":3,"sources":["/Users/jlw/Documents/frontBatiuni/src/app/shared/common/classes.ts"],"names":["EventEmitter","Subject","i0","Destroy$","constructor","destroy$","ngOnDestroy","next","complete","ɵfac","Destroy$_Factory","t","ɵdir","ɵɵdefineDirective","type","IndexBased","_index","indexChange","index","value","indexChanged","emit","first","IndexBased_Factory","inputs","outputs","AnimateCSS","factoryResolver","view","create","what","ctx","createComponent","createTemplate","template","createEmbeddedView","element","rootNodes","component","factory","resolveComponentFactory","componentRef","location","nativeElement","hostView","animateWithClass","className","callback","_a","parentElement","scrollTop","classList","add","save","onanimationend","e","call","remove","AnimateCSS_Factory","ɵɵdirectiveInject","ComponentFactoryResolver","ViewContainerRef","features","ɵɵInheritDefinitionFeature","UIOpenMenu","initialized","_open","block","openChange","open","document","body","close","UIOpenMenu_Factory","hostVars","hostBindings","UIOpenMenu_HostBindings","rf","ɵɵclassProp","DimensionMenu","dimension","left","top","dimensionX","dimensionY","width","height","DimensionMenu_Factory","DimensionMenu_HostBindings","ɵɵstyleProp","UIDefaultAccessor","cd","valueChange","isDisabled","onTouched","onChanged","_value","set","tabIndex","$onTouched","notifyForm","markForCheck","onChange","preventDefault","getInput","disabled","setDisabledState","registerOnTouched","writeValue","registerOnChange","UIDefaultAccessor_Factory","ChangeDetectorRef","UIDefaultAccessor_HostBindings","ɵɵlistener","UIDefaultAccessor_blur_HostBindingHandler","ɵɵattribute","UIAsyncAccessor","UIAsyncAccessor_Factory","PropertyTrap","get","target","property","path","split","root","field","undefined","lastField","length","slice"],"mappings":"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","sourcesContent":["import { EventEmitter } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nexport class Destroy$ {\n    constructor() {\n        this.destroy$ = new Subject();\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n}\nDestroy$.ɵfac = function Destroy$_Factory(t) { return new (t || Destroy$)(); };\nDestroy$.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: Destroy$ });\nexport class IndexBased {\n    constructor() {\n        this._index = 0;\n        this.indexChange = new EventEmitter();\n    }\n    get index() { return this._index; }\n    set index(value) {\n        if (this._index == value)\n            return;\n        this.indexChanged(value - this.index); //will set the index\n        this.indexChange.emit(this.index);\n    }\n    ;\n    get first() { return this._index == 0; }\n    ;\n}\nIndexBased.ɵfac = function IndexBased_Factory(t) { return new (t || IndexBased)(); };\nIndexBased.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: IndexBased, inputs: { index: \"index\" }, outputs: { indexChange: \"indexChange\" } });\n;\nexport class AnimateCSS extends IndexBased {\n    constructor(factoryResolver, view) {\n        super();\n        this.factoryResolver = factoryResolver;\n        this.view = view;\n    }\n    create(what, type, ctx = {}) {\n        return type == 'component' ? this.createComponent(what) : this.createTemplate(what, ctx);\n    }\n    createTemplate(template, ctx = {}) {\n        let view = this.view.createEmbeddedView(template, ctx);\n        return { element: view.rootNodes[0], view };\n    }\n    createComponent(component) {\n        let factory = this.factoryResolver.resolveComponentFactory(component), componentRef = this.view.createComponent(factory);\n        return { element: componentRef.location.nativeElement, view: componentRef.hostView };\n    }\n    animateWithClass(element, className, callback) {\n        var _a;\n        if (element.parentElement)\n            element.parentElement.scrollTop = 0;\n        element.scrollTop = 0;\n        (_a = element.classList) === null || _a === void 0 ? void 0 : _a.add(className);\n        let save = element.onanimationend;\n        element.onanimationend = (e) => {\n            save && save.call(element, e);\n            element.onanimationend = save;\n            callback === null || callback === void 0 ? void 0 : callback(element, e);\n            element.classList.remove(className);\n        };\n    }\n}\nAnimateCSS.ɵfac = function AnimateCSS_Factory(t) { return new (t || AnimateCSS)(i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.ViewContainerRef)); };\nAnimateCSS.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: AnimateCSS, features: [i0.ɵɵInheritDefinitionFeature] });\n;\nexport class UIOpenMenu {\n    constructor() {\n        this.initialized = false;\n        this._open = false;\n        this.block = true;\n        this.openChange = new EventEmitter();\n    }\n    get open() { return this._open; }\n    set open(value) {\n        if (!this.initialized) {\n            this.initialized = true;\n            this._open = value;\n            return;\n        }\n        if (value == this._open)\n            return;\n        if (value) {\n            if (this.block)\n                document.body.classList.add('blocked');\n            this._open = value;\n        }\n        else {\n            if (this.block)\n                document.body.classList.remove('blocked');\n            //this._open = false;\n            this.close();\n        }\n    }\n}\nUIOpenMenu.ɵfac = function UIOpenMenu_Factory(t) { return new (t || UIOpenMenu)(); };\nUIOpenMenu.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: UIOpenMenu, hostVars: 2, hostBindings: function UIOpenMenu_HostBindings(rf, ctx) { if (rf & 2) {\n        i0.ɵɵclassProp(\"open\", ctx._open);\n    } }, inputs: { block: \"block\", open: \"open\" }, outputs: { openChange: \"openChange\" } });\n;\nexport class DimensionMenu extends UIOpenMenu {\n    constructor() {\n        super();\n        this.dimension = { left: '0', top: '0' };\n    }\n    get dimensionX() { return this.dimension.left; }\n    get dimensionY() { return this.dimension.top; }\n    get width() { return this.dimension.width || '100%'; }\n    get height() { return this.dimension.height || '100%'; }\n}\nDimensionMenu.ɵfac = function DimensionMenu_Factory(t) { return new (t || DimensionMenu)(); };\nDimensionMenu.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: DimensionMenu, hostVars: 8, hostBindings: function DimensionMenu_HostBindings(rf, ctx) { if (rf & 2) {\n        i0.ɵɵstyleProp(\"left\", ctx.dimensionX)(\"top\", ctx.dimensionY)(\"width\", ctx.width)(\"height\", ctx.height);\n    } }, inputs: { dimension: \"dimension\" }, features: [i0.ɵɵInheritDefinitionFeature] });\n;\n//Very important class, should be fine for now\n//valueChange is trigged whenever the value changes\n//there should be another event for stuff that come from the DOM\n//because now we have to rely on other events like (click) etc to get user action\n//this won't cause issue but it will feel like dodging bullets once to start doing\n//something unorthodox\nexport class UIDefaultAccessor {\n    constructor(cd) {\n        this.cd = cd;\n        this.valueChange = new EventEmitter();\n        this.isDisabled = false;\n        this.onTouched = () => { };\n        this.onChanged = (value) => { };\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this.set(value);\n    }\n    get tabIndex() { return 0; }\n    $onTouched() { this.onTouched(); }\n    set(next, notifyForm = true) {\n        if (next !== this.value) {\n            this.valueChange.emit(this._value = next);\n            if (notifyForm)\n                this.onChanged(this.value);\n            this.cd.markForCheck();\n        }\n        //apparently skipping this call breaks everything\n        this.$onTouched();\n    }\n    onChange(e) {\n        var _a;\n        if (this.isDisabled) {\n            (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n            return;\n        }\n        this.set(this.getInput(e));\n        return this.value;\n    }\n    ;\n    //default implementation\n    getInput(e) { return e; }\n    ;\n    set disabled(disabled) {\n        if (disabled != null)\n            this.isDisabled = true;\n        else\n            this.isDisabled = false;\n    }\n    setDisabledState(isDisabled) { this.isDisabled = isDisabled; }\n    registerOnTouched(onTouched) {\n        this.onTouched = onTouched;\n    }\n    writeValue(value) {\n        if (value === void 0)\n            return;\n        this.set(value, false);\n    }\n    registerOnChange(onChanged) {\n        this.onChanged = onChanged;\n    }\n}\nUIDefaultAccessor.ɵfac = function UIDefaultAccessor_Factory(t) { return new (t || UIDefaultAccessor)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\nUIDefaultAccessor.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: UIDefaultAccessor, hostVars: 1, hostBindings: function UIDefaultAccessor_HostBindings(rf, ctx) { if (rf & 1) {\n        i0.ɵɵlistener(\"blur\", function UIDefaultAccessor_blur_HostBindingHandler() { return ctx.$onTouched(); });\n    } if (rf & 2) {\n        i0.ɵɵattribute(\"tabindex\", ctx.tabIndex);\n    } }, inputs: { value: \"value\", disabled: \"disabled\" }, outputs: { valueChange: \"valueChange\" } });\n;\nexport class UIAsyncAccessor extends UIDefaultAccessor {\n    constructor(cd) {\n        super(cd);\n    }\n    getInput(e) { return super.getInput(e); }\n    async onChange(e) {\n        var _a;\n        if (this.isDisabled) {\n            (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n            return;\n        }\n        let next = await this.getInput(e);\n        this.set(next);\n    }\n    ;\n}\nUIAsyncAccessor.ɵfac = function UIAsyncAccessor_Factory(t) { return new (t || UIAsyncAccessor)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\nUIAsyncAccessor.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: UIAsyncAccessor, features: [i0.ɵɵInheritDefinitionFeature] });\n;\n//make it compatible with references ??\nexport const PropertyTrap = {\n    get(target, property) {\n        const path = property.split('.');\n        let root = target;\n        for (const field of path) {\n            if (root[field])\n                root = root[field];\n            else\n                return undefined;\n        }\n        ;\n        return root;\n    },\n    set(target, property, value) {\n        const path = property.split('.'), lastField = path[path.length - 1];\n        let root = target;\n        for (const field of path.slice(0, -1)) {\n            if (root[field])\n                root = root[field];\n            else\n                root = root[field] = {};\n        }\n        root[lastField] = value;\n        return true;\n    }\n};\n"]},"metadata":{},"sourceType":"module"}