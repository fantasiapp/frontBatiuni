{"ast":null,"code":"import { SlideTemplate } from \"../../directives/slideTemplate.directive\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/file-downloader.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@ngxs/store\";\nimport * as i4 from \"../profile-image/profile-image.component\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../directives/slideTemplate.directive\";\n\nfunction SuiviComments_div_8_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"img\", 12);\n    i0.ɵɵlistener(\"click\", function SuiviComments_div_8_ng_container_2_Template_img_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.slides.slide(\"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"img\", 13);\n    i0.ɵɵlistener(\"click\", function SuiviComments_div_8_ng_container_2_Template_img_click_2_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.slides.slide(\"right\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hidden\", ctx_r4.slides.first);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hidden\", ctx_r4.slides.last);\n  }\n}\n\nfunction SuiviComments_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"div\", 10);\n    i0.ɵɵtemplate(2, SuiviComments_div_8_ng_container_2_Template, 3, 4, \"ng-container\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(13);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"slide-template\", _r2)(\"contexts\", ctx_r0.supervision.files);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.manyFiles);\n  }\n}\n\nfunction SuiviComments_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵprojection(1);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SuiviComments_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r3.getImage(ctx_r3.supervision.files) || \"assets/unavailable.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nconst _c0 = [[[\"comment-suivi\"]]];\nconst _c1 = [\"comment-suivi\"];\nexport let SuiviComments = /*#__PURE__*/(() => {\n  class SuiviComments {\n    constructor(downloader, sanitizer, store) {\n      this.downloader = downloader;\n      this.sanitizer = sanitizer;\n      this.store = store;\n      this.parentComment = null;\n      this._supervision = {\n        id: -1,\n        Supervisions: [],\n        author: 'Gabriel Dubois',\n        date: 13 - 11 - 2021,\n        comment: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\n        files: []\n      };\n    }\n\n    get supervision() {\n      return this._supervision;\n    }\n\n    set supervision(supervision) {\n      this._supervision = supervision;\n    }\n\n    get manyFiles() {\n      return this.supervision.files.length > 1;\n    }\n\n    slide(k) {//download fields on the go\n    } // getImage(file?: File) {\n    //   if ( !file ) return null;\n    //   if ( file.content ) return this.downloader.toSecureBase64(file);\n    //   return this.downloader.downloadFile(file).pipe(map(file => this.downloader.toSecureBase64(file)));\n    // }\n\n\n    getImage(file) {\n      // let fileObject = this.store.selectSnapshot(DataQueries.getById('File', file[0]));\n      let test = this.downloader.downloadFile(file[0]); // return this.downloader.downloadFile(file[0]).pipe(map(file => \n      //   {\n      //     this.downloader.toSecureBase64(file)}));\n      //   }\n\n      return null;\n    }\n\n  }\n\n  SuiviComments.ɵfac = function SuiviComments_Factory(t) {\n    return new (t || SuiviComments)(i0.ɵɵdirectiveInject(i1.FileDownloader), i0.ɵɵdirectiveInject(i2.DomSanitizer), i0.ɵɵdirectiveInject(i3.Store));\n  };\n\n  SuiviComments.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SuiviComments,\n    selectors: [[\"comment-suivi\"]],\n    contentQueries: function SuiviComments_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, SuiviComments, 5, SuiviComments);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.parentComment = _t.first);\n      }\n    },\n    viewQuery: function SuiviComments_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(SlideTemplate, 7, SlideTemplate);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.slides = _t.first);\n      }\n    },\n    inputs: {\n      supervision: \"supervision\"\n    },\n    ngContentSelectors: _c1,\n    decls: 14,\n    vars: 5,\n    consts: [[1, \"comment-provider\", \"flex\", \"center-cross\"], [1, \"user-image\"], [1, \"user-info\"], [1, \"user-name\"], [1, \"post-date\"], [\"class\", \"comment-image position-relative\", 4, \"ngIf\"], [1, \"suivi-comment\"], [\"class\", \"parent-comment\", 4, \"ngIf\"], [\"image\", \"\"], [1, \"comment-image\", \"position-relative\"], [1, \"cover-parent\", 3, \"slide-template\", \"contexts\"], [4, \"ngIf\"], [\"src\", \"assets/arrowleft.svg\", 1, \"position-absolute\", \"left\", 3, \"click\"], [\"src\", \"assets/arrowright.svg\", 1, \"position-absolute\", \"right\", 3, \"click\"], [1, \"parent-comment\"], [1, \"main\", 3, \"src\"]],\n    template: function SuiviComments_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef(_c0);\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"profile-image\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"span\", 4);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, SuiviComments_div_8_Template, 3, 3, \"div\", 5);\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, SuiviComments_div_11_Template, 2, 0, \"div\", 7);\n        i0.ɵɵtemplate(12, SuiviComments_ng_template_12_Template, 1, 1, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.supervision.author);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Le \", ctx.supervision.date, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.supervision.files.length > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.supervision.comment, \"\\n\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.parentComment);\n      }\n    },\n    directives: [i4.UIProfileImageComponent, i5.NgIf, i6.SlideTemplate],\n    styles: [\"[_ngcontent-%COMP%]:root{--notification-size: $notification-size}.comment-image[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .comment-image[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}.page-content-with-tabs[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;touch-action:pan-y!important}.page-content-with-tabs[_ngcontent-%COMP%]{margin-top:150px;margin-top:calc(constant(safe-area-inset-top) + 150px);margin-top:calc(env(safe-area-inset-top) + 150px);margin-bottom:0;margin-bottom:calc(constant(safe-area-inset-bottom) + 0);margin-bottom:calc(env(safe-area-inset-bottom) + 0);height:calc(100vh - 220px - env(safe-area-inset-bottom))}.invert[_ngcontent-%COMP%]{filter:invert(1)}[_nghost-%COMP%]{display:block;border:1px solid #C7C7C7;padding:0}.user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:.9em}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3em}.user-info[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-weight:200}.comment-provider[_ngcontent-%COMP%]{height:100px}.user-image[_ngcontent-%COMP%]{transform:scale(.5) rotate(45deg);margin:0}.comment-image[_ngcontent-%COMP%]   img.main[_ngcontent-%COMP%]{height:225px;width:100%;object-fit:contain}.comment-image[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{left:8px}.comment-image[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{right:8px}.suivi-comment[_ngcontent-%COMP%], .parent-comment[_ngcontent-%COMP%]{border-bottom:inherit;padding:8px;line-height:1.5em}.parent-comment[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.response[_ngcontent-%COMP%]{justify-content:space-between;padding:8px}.response[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;white-space:normal}.hidden[_ngcontent-%COMP%]{display:none}\"],\n    changeDetection: 0\n  });\n  return SuiviComments;\n})();","map":null,"metadata":{},"sourceType":"module"}