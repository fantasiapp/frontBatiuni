{"ast":null,"code":"import _asyncToGenerator from \"/Users/jlw/Documents/frontBatiuni/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Destroy$ } from \"src/app/shared/common/classes\";\nimport { DataQueries, DataState } from \"src/models/new/data.state\";\nimport { take } from \"rxjs/operators\";\nimport { ModifyDetailedPost, CreateSupervision, CreateDetailedPost, UploadImageSupervision } from \"src/models/new/user/user.actions\";\nimport { SuiviPME } from \"../suivi_pme/suivi-pme.page\";\nimport { Camera, CameraResultType, CameraSource } from \"@capacitor/camera\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nimport * as i2 from \"src/app/shared/components/popup/popup.component\";\n\nfunction SuiviChantierDate_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"label\", 13);\n    i0.ɵɵtext(2, \"Choisir les t\\u00E2ches pour ce jour\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"img\", 15);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_2_Template_img_click_4_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.swipeMenu = true;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SuiviChantierDate_div_4_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"comment-suivi\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const supervision_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"supervision\", supervision_r10);\n  }\n}\n\nfunction SuiviChantierDate_div_4_div_8_input_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 26);\n    i0.ɵɵlistener(\"focusout\", function SuiviChantierDate_div_4_div_8_input_1_Template_input_focusout_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const task_r7 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.mainComment(task_r7);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const task_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"input_\", task_r7.id, \"\");\n  }\n}\n\nfunction SuiviChantierDate_div_4_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, SuiviChantierDate_div_4_div_8_input_1_Template, 1, 1, \"input\", 24);\n    i0.ɵɵelementStart(2, \"img\", 25);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_div_8_Template_img_click_2_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.swipeMenuImage = true;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r9.mission.isClosed);\n  }\n}\n\nfunction SuiviChantierDate_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 19);\n    i0.ɵɵelementStart(5, \"img\", 20);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_Template_img_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const task_r7 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.validate(task_r7);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"img\", 20);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_Template_img_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const task_r7 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.refuse(task_r7);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, SuiviChantierDate_div_4_div_7_Template, 2, 1, \"div\", 5);\n    i0.ɵɵtemplate(8, SuiviChantierDate_div_4_div_8_Template, 3, 1, \"div\", 21);\n    i0.ɵɵelement(9, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const task_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", task_r7.content, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"control_validate_\", task_r7.id, \"\");\n    i0.ɵɵproperty(\"src\", task_r7.validationImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"control_refuse_\", task_r7.id, \"\");\n    i0.ɵɵproperty(\"src\", task_r7.invalidationImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", task_r7.supervisionsObject);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r7.refused);\n  }\n}\n\nfunction SuiviChantierDate_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"comment-suivi\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const supervision_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"supervision\", supervision_r21);\n  }\n}\n\nfunction SuiviChantierDate_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelementStart(1, \"label\", 13);\n    i0.ɵɵtext(2, \"Communiquer avec votre partenaire de chantier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 23);\n    i0.ɵɵelementStart(4, \"input\", 28);\n    i0.ɵɵlistener(\"focusout\", function SuiviChantierDate_div_6_Template_input_focusout_4_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.mainComment(null);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"img\", 25);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_6_Template_img_click_5_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.swipeMenuImage == true;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class SuiviChantierDate extends Destroy$ {\n  constructor(cd, store, popup) {\n    super();\n    this.cd = cd;\n    this.store = store;\n    this.popup = popup;\n    this.swipeMenu = false;\n    this.swipeMenuImage = false;\n    this.view = \"PME\";\n    this.currentTaskId = null;\n\n    this._reloadMission = date => {\n      return [this.date, this.mission];\n    };\n\n    this._date = {\n      id: 0,\n      value: 0,\n      tasks: [],\n      selectedTasks: [],\n      taskWithoutDouble: [],\n      view: this.view,\n      supervisions: []\n    };\n    this._mission = null;\n  }\n\n  get date() {\n    return this._date;\n  }\n\n  set date(date) {\n    this._date = date;\n  }\n\n  get mission() {\n    return this._mission;\n  }\n\n  set mission(mission) {\n    this.view = this.store.selectSnapshot(DataState.view);\n    this._mission = mission;\n  }\n\n  get reloadMission() {\n    return this._reloadMission;\n  }\n\n  set reloadMission(callBack) {\n    this._reloadMission = callBack;\n  }\n\n  takePhoto() {\n    return _asyncToGenerator(function* () {\n      const photo = yield Camera.getPhoto({\n        allowEditing: false,\n        resultType: CameraResultType.Base64,\n        source: CameraSource.Camera\n      }); // this.store.dispatch(new ChangeProfilePicture(photo, 'image'));\n      // scr = photo.format, imageBase64 = photo.base64String, \n    })();\n  }\n\n  selectPhoto() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const photo = yield Camera.getPhoto({\n        allowEditing: false,\n        resultType: CameraResultType.Base64,\n        source: CameraSource.Photos\n      });\n\n      _this.store.dispatch(new UploadImageSupervision(photo, _this.mission.id, _this.currentTaskId));\n    })();\n  }\n\n  addDateToPost() {\n    this.popup.openDateDialog(this.mission, this.date, this);\n    this.swipeMenu = false;\n  }\n\n  updatePage(content, missionId) {\n    if (content) {\n      this.store.dispatch(new CreateDetailedPost(missionId, content, this.date.value)).pipe(take(1)).subscribe(() => {\n        this.updatePageOnlyDate();\n      });\n    } else {\n      this.updatePageOnlyDate();\n      document.getElementById(\"accordion\");\n    }\n  }\n\n  updatePageOnlyDate() {\n    let [date, mission] = this._reloadMission(this.date);\n\n    this.date = date;\n    this.mission = mission;\n  }\n\n  validate(task) {\n    if (this.view == 'ST' && !task.refused) {\n      task.validated = !task.validated;\n      this.store.dispatch(new ModifyDetailedPost(task)).pipe(take(1)).subscribe(() => {\n        let control = document.getElementById(\"control_validate_\" + task.id);\n        control.src = SuiviPME.computeTaskImage(task, \"validated\");\n      });\n    }\n  }\n\n  refuse(task) {\n    if (this.view == 'ST' && !task.validated) {\n      task.refused = !task.refused;\n      this.store.dispatch(new ModifyDetailedPost(task)).pipe(take(1)).subscribe(() => {\n        this.mission = this.store.selectSnapshot(DataQueries.getById('Mission', this.mission.id));\n        let control = document.getElementById(\"control_refuse_\" + task.id);\n        control.src = SuiviPME.computeTaskImage(task, \"refused\");\n      });\n    }\n  }\n\n  mainComment(task) {\n    let idInput = task ? \"input_\" + task.id : \"input_general\";\n    let input = document.getElementById(idInput);\n    this.currentTaskId = task ? task.id : null;\n\n    if (input) {\n      let detailPostId = task ? task.id : null;\n      this.store.dispatch(new CreateSupervision(this.mission.id, detailPostId, null, input.value, this.date.value)).pipe(take(1)).subscribe(() => {\n        this.updatePageOnlyDate();\n      });\n    }\n  }\n\n}\n\nSuiviChantierDate.ɵfac = function SuiviChantierDate_Factory(t) {\n  return new (t || SuiviChantierDate)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.PopupService));\n};\n\nSuiviChantierDate.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SuiviChantierDate,\n  selectors: [[\"suivi-chantier_date\"]],\n  inputs: {\n    date: \"date\",\n    mission: \"mission\",\n    reloadMission: \"reloadMission\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 18,\n  vars: 8,\n  consts: [[3, \"title\"], [1, \"form-input\", 3, \"id\"], [\"class\", \"clear-margin full-width flex center-cross space-arround\", 4, \"ngIf\"], [2, \"height\", \"20px\"], [\"class\", \"taskByDate\", \"style\", \"width:97%\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-input\", 4, \"ngIf\"], [2, \"height\", \"30px\"], [1, \"dashed\", 2, \"margin-left\", \"0 !important\"], [3, \"open\", \"openChange\"], [3, \"click\"], [\"modifyPicture\", \"\"], [1, \"clear-margin\", \"full-width\", \"flex\", \"center-cross\", \"space-arround\"], [2, \"color\", \"#0C5E8D\", \"padding-left\", \"3%\"], [2, \"width\", \"45%\"], [\"src\", \"assets/Option.svg\", 3, \"click\"], [1, \"taskByDate\", 2, \"width\", \"97%\"], [1, \"details\", \"flex\", \"center-cross\", \"space-between\"], [1, \"detail-name\"], [1, \"controls\"], [3, \"id\", \"src\", \"click\"], [\"class\", \"divComment\", 4, \"ngIf\"], [3, \"supervision\"], [1, \"divComment\"], [\"class\", \"inputComment\", \"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 3, \"id\", \"focusout\", 4, \"ngIf\"], [\"src\", \"assets/camera.png\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 1, \"inputComment\", 3, \"id\", \"focusout\"], [1, \"form-input\"], [\"id\", \"input_general\", \"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 1, \"inputComment\", 3, \"focusout\"]],\n  template: function SuiviChantierDate_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"accordion\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtemplate(2, SuiviChantierDate_div_2_Template, 5, 0, \"div\", 2);\n      i0.ɵɵelement(3, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, SuiviChantierDate_div_4_Template, 10, 7, \"div\", 4);\n      i0.ɵɵtemplate(5, SuiviChantierDate_div_5_Template, 2, 1, \"div\", 5);\n      i0.ɵɵtemplate(6, SuiviChantierDate_div_6_Template, 6, 0, \"div\", 6);\n      i0.ɵɵelement(7, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"hr\", 8);\n      i0.ɵɵelementStart(9, \"swipeup\", 9);\n      i0.ɵɵlistener(\"openChange\", function SuiviChantierDate_Template_swipeup_openChange_9_listener($event) {\n        return ctx.swipeMenu = $event;\n      });\n      i0.ɵɵelementStart(10, \"li\", 10);\n      i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_10_listener() {\n        return ctx.addDateToPost();\n      });\n      i0.ɵɵtext(11, \" Modifier les t\\u00E2ches\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"swipeup\", 9, 11);\n      i0.ɵɵlistener(\"openChange\", function SuiviChantierDate_Template_swipeup_openChange_12_listener($event) {\n        return ctx.swipeMenuImage = $event;\n      });\n      i0.ɵɵelementStart(14, \"li\", 10);\n      i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_14_listener() {\n        return ctx.takePhoto();\n      });\n      i0.ɵɵtext(15, \"Acc\\u00E9dez \\u00E0 l'appareil photo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"li\", 10);\n      i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_16_listener() {\n        return ctx.selectPhoto();\n      });\n      i0.ɵɵtext(17, \"T\\u00E9l\\u00E9charger une image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"title\", \"Le \" + ctx.date.value);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate1(\"id\", \"taskMain_\", ctx.date.id, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.date.view == \"PME\" && !ctx.mission.isClosed);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.date.selectedTasks);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.date.supervisions);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.mission.isClosed);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"open\", ctx.swipeMenu);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"open\", ctx.swipeMenuImage);\n    }\n  },\n  styles: [\"accordion[_ngcontent-%COMP%] {\\n  padding: 0 2rem;\\n}\\n\\n.controls[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:first-child {\\n  margin-right: 15px;\\n}\\n\\n.divComment[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  border: 1px solid #0D6191;\\n  border-radius: 20px;\\n  height: 40px;\\n  margin: 15px;\\n  width: 96%;\\n  padding: 10px;\\n}\\n\\n.inputComment[_ngcontent-%COMP%] {\\n  width: 90%;\\n}\\n\\n.detail-name[_ngcontent-%COMP%] {\\n  padding-left: 3%;\\n  width: 80%;\\n}\\n\\n.newDate[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  width: 50%;\\n  margin-left: 25%;\\n  margin-top: 30px;\\n}\\n\\n.liDate[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-around;\\n  width: 90%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1aXZpX2NoYW50aWVyX2RhdGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtBQUNGOztBQUdFO0VBQ0Usa0JBQUE7QUFBSjs7QUFJQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBRUEsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxhQUFBO0FBRkY7O0FBS0E7RUFDRSxVQUFBO0FBRkY7O0FBS0E7RUFDRSxnQkFBQTtFQUNBLFVBQUE7QUFGRjs7QUFLQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0VBQ0EsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUFGRjs7QUFLQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDZCQUFBO0VBQ0EsVUFBQTtBQUZGIiwiZmlsZSI6InN1aXZpX2NoYW50aWVyX2RhdGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYWNjb3JkaW9uIHtcbiAgcGFkZGluZzogMCAycmVtO1xufVxuXG4uY29udHJvbHMge1xuICBpbWc6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgfVxufVxuXG4uZGl2Q29tbWVudCB7XG4gIGRpc3BsYXk6ZmxleDtcbiAgZmxleC1kaXJlY3Rpb246cm93O1xuICBib3JkZXI6MXB4IHNvbGlkICMwRDYxOTEgO1xuICA7XG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gIGhlaWdodDo0MHB4O1xuICBtYXJnaW46MTVweDtcbiAgd2lkdGg6OTYlO1xuICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uaW5wdXRDb21tZW50IHtcbiAgd2lkdGg6OTAlXG59XG5cbi5kZXRhaWwtbmFtZSB7XG4gIHBhZGRpbmctbGVmdDozJTtcbiAgd2lkdGg6ODAlXG59XG5cbi5uZXdEYXRlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246cm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIHdpZHRoOjUwJTtcbiAgbWFyZ2luLWxlZnQ6IDI1JTtcbiAgbWFyZ2luLXRvcDogMzBweDtcbn1cblxuLmxpRGF0ZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOnJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gIHdpZHRoOjkwJTtcbn0iXX0= */\"],\n  changeDetection: 0\n});","map":{"version":3,"sources":["/Users/jlw/Documents/frontBatiuni/src/app/mobile/components/suivi_chantier_date/suivi_chantier_date.page.ts"],"names":["Destroy$","DataQueries","DataState","take","ModifyDetailedPost","CreateSupervision","CreateDetailedPost","UploadImageSupervision","SuiviPME","Camera","CameraResultType","CameraSource","i0","i1","i2","SuiviChantierDate_div_2_Template","rf","ctx","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","SuiviChantierDate_div_2_Template_img_click_4_listener","ɵɵrestoreView","ctx_r5","ɵɵnextContext","swipeMenu","SuiviChantierDate_div_4_div_7_Template","supervision_r10","$implicit","ɵɵadvance","ɵɵproperty","SuiviChantierDate_div_4_div_8_input_1_Template","_r14","SuiviChantierDate_div_4_div_8_input_1_Template_input_focusout_0_listener","task_r7","ctx_r12","mainComment","ɵɵpropertyInterpolate1","id","SuiviChantierDate_div_4_div_8_Template","_r17","ɵɵtemplate","SuiviChantierDate_div_4_div_8_Template_img_click_2_listener","ctx_r16","swipeMenuImage","ctx_r9","mission","isClosed","SuiviChantierDate_div_4_Template","_r19","SuiviChantierDate_div_4_Template_img_click_5_listener","restoredCtx","ctx_r18","validate","SuiviChantierDate_div_4_Template_img_click_6_listener","ctx_r20","refuse","ɵɵtextInterpolate1","content","validationImage","ɵɵsanitizeUrl","invalidationImage","supervisionsObject","refused","SuiviChantierDate_div_5_Template","supervision_r21","SuiviChantierDate_div_6_Template","_r23","SuiviChantierDate_div_6_Template_input_focusout_4_listener","ctx_r22","SuiviChantierDate_div_6_Template_img_click_5_listener","ctx_r24","SuiviChantierDate","constructor","cd","store","popup","view","currentTaskId","_reloadMission","date","_date","value","tasks","selectedTasks","taskWithoutDouble","supervisions","_mission","selectSnapshot","reloadMission","callBack","takePhoto","photo","getPhoto","allowEditing","resultType","Base64","source","selectPhoto","Photos","dispatch","addDateToPost","openDateDialog","updatePage","missionId","pipe","subscribe","updatePageOnlyDate","document","getElementById","task","validated","control","src","computeTaskImage","getById","idInput","input","detailPostId","ɵfac","SuiviChantierDate_Factory","t","ɵɵdirectiveInject","ChangeDetectorRef","Store","PopupService","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","SuiviChantierDate_Template","SuiviChantierDate_Template_swipeup_openChange_9_listener","$event","SuiviChantierDate_Template_li_click_10_listener","SuiviChantierDate_Template_swipeup_openChange_12_listener","SuiviChantierDate_Template_li_click_14_listener","SuiviChantierDate_Template_li_click_16_listener","styles","changeDetection"],"mappings":"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","sourcesContent":["import { Destroy$ } from \"src/app/shared/common/classes\";\nimport { DataQueries, DataState } from \"src/models/new/data.state\";\nimport { take } from \"rxjs/operators\";\nimport { ModifyDetailedPost, CreateSupervision, CreateDetailedPost, UploadImageSupervision } from \"src/models/new/user/user.actions\";\nimport { SuiviPME } from \"../suivi_pme/suivi-pme.page\";\nimport { Camera, CameraResultType, CameraSource } from \"@capacitor/camera\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nimport * as i2 from \"src/app/shared/components/popup/popup.component\";\nfunction SuiviChantierDate_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"label\", 13);\n    i0.ɵɵtext(2, \"Choisir les t\\u00E2ches pour ce jour\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"img\", 15);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_2_Template_img_click_4_listener() { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.swipeMenu = true; });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} }\nfunction SuiviChantierDate_div_4_div_7_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"comment-suivi\", 22);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const supervision_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"supervision\", supervision_r10);\n} }\nfunction SuiviChantierDate_div_4_div_8_input_1_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 26);\n    i0.ɵɵlistener(\"focusout\", function SuiviChantierDate_div_4_div_8_input_1_Template_input_focusout_0_listener() { i0.ɵɵrestoreView(_r14); const task_r7 = i0.ɵɵnextContext(2).$implicit; const ctx_r12 = i0.ɵɵnextContext(); return ctx_r12.mainComment(task_r7); });\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const task_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"input_\", task_r7.id, \"\");\n} }\nfunction SuiviChantierDate_div_4_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, SuiviChantierDate_div_4_div_8_input_1_Template, 1, 1, \"input\", 24);\n    i0.ɵɵelementStart(2, \"img\", 25);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_div_8_Template_img_click_2_listener() { i0.ɵɵrestoreView(_r17); const ctx_r16 = i0.ɵɵnextContext(2); return ctx_r16.swipeMenuImage = true; });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r9.mission.isClosed);\n} }\nfunction SuiviChantierDate_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 19);\n    i0.ɵɵelementStart(5, \"img\", 20);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_Template_img_click_5_listener() { const restoredCtx = i0.ɵɵrestoreView(_r19); const task_r7 = restoredCtx.$implicit; const ctx_r18 = i0.ɵɵnextContext(); return ctx_r18.validate(task_r7); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"img\", 20);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_4_Template_img_click_6_listener() { const restoredCtx = i0.ɵɵrestoreView(_r19); const task_r7 = restoredCtx.$implicit; const ctx_r20 = i0.ɵɵnextContext(); return ctx_r20.refuse(task_r7); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, SuiviChantierDate_div_4_div_7_Template, 2, 1, \"div\", 5);\n    i0.ɵɵtemplate(8, SuiviChantierDate_div_4_div_8_Template, 3, 1, \"div\", 21);\n    i0.ɵɵelement(9, \"div\", 7);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const task_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", task_r7.content, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"control_validate_\", task_r7.id, \"\");\n    i0.ɵɵproperty(\"src\", task_r7.validationImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"control_refuse_\", task_r7.id, \"\");\n    i0.ɵɵproperty(\"src\", task_r7.invalidationImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", task_r7.supervisionsObject);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r7.refused);\n} }\nfunction SuiviChantierDate_div_5_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"comment-suivi\", 22);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const supervision_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"supervision\", supervision_r21);\n} }\nfunction SuiviChantierDate_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelementStart(1, \"label\", 13);\n    i0.ɵɵtext(2, \"Communiquer avec votre partenaire de chantier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 23);\n    i0.ɵɵelementStart(4, \"input\", 28);\n    i0.ɵɵlistener(\"focusout\", function SuiviChantierDate_div_6_Template_input_focusout_4_listener() { i0.ɵɵrestoreView(_r23); const ctx_r22 = i0.ɵɵnextContext(); return ctx_r22.mainComment(null); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"img\", 25);\n    i0.ɵɵlistener(\"click\", function SuiviChantierDate_div_6_Template_img_click_5_listener() { i0.ɵɵrestoreView(_r23); const ctx_r24 = i0.ɵɵnextContext(); return ctx_r24.swipeMenuImage == true; });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} }\nexport class SuiviChantierDate extends Destroy$ {\n    constructor(cd, store, popup) {\n        super();\n        this.cd = cd;\n        this.store = store;\n        this.popup = popup;\n        this.swipeMenu = false;\n        this.swipeMenuImage = false;\n        this.view = \"PME\";\n        this.currentTaskId = null;\n        this._reloadMission = (date) => { return [this.date, this.mission]; };\n        this._date = { id: 0, value: 0, tasks: [], selectedTasks: [], taskWithoutDouble: [], view: this.view, supervisions: [] };\n        this._mission = null;\n    }\n    get date() { return this._date; }\n    set date(date) {\n        this._date = date;\n    }\n    get mission() { return this._mission; }\n    set mission(mission) {\n        this.view = this.store.selectSnapshot(DataState.view);\n        this._mission = mission;\n    }\n    get reloadMission() { return this._reloadMission; }\n    set reloadMission(callBack) {\n        this._reloadMission = callBack;\n    }\n    async takePhoto() {\n        const photo = await Camera.getPhoto({\n            allowEditing: false,\n            resultType: CameraResultType.Base64,\n            source: CameraSource.Camera\n        });\n        // this.store.dispatch(new ChangeProfilePicture(photo, 'image'));\n        // scr = photo.format, imageBase64 = photo.base64String, \n    }\n    async selectPhoto() {\n        const photo = await Camera.getPhoto({\n            allowEditing: false,\n            resultType: CameraResultType.Base64,\n            source: CameraSource.Photos,\n        });\n        this.store.dispatch(new UploadImageSupervision(photo, this.mission.id, this.currentTaskId));\n    }\n    addDateToPost() {\n        this.popup.openDateDialog(this.mission, this.date, this);\n        this.swipeMenu = false;\n    }\n    updatePage(content, missionId) {\n        if (content) {\n            this.store.dispatch(new CreateDetailedPost(missionId, content, this.date.value)).pipe(take(1)).subscribe(() => {\n                this.updatePageOnlyDate();\n            });\n        }\n        else {\n            this.updatePageOnlyDate();\n            document.getElementById(\"accordion\");\n        }\n    }\n    updatePageOnlyDate() {\n        let [date, mission] = this._reloadMission(this.date);\n        this.date = date;\n        this.mission = mission;\n    }\n    validate(task) {\n        if (this.view == 'ST' && !task.refused) {\n            task.validated = !task.validated;\n            this.store.dispatch(new ModifyDetailedPost(task)).pipe(take(1)).subscribe(() => {\n                let control = document.getElementById(\"control_validate_\" + task.id);\n                control.src = SuiviPME.computeTaskImage(task, \"validated\");\n            });\n        }\n    }\n    refuse(task) {\n        if (this.view == 'ST' && !task.validated) {\n            task.refused = !task.refused;\n            this.store.dispatch(new ModifyDetailedPost(task)).pipe(take(1)).subscribe(() => {\n                this.mission = this.store.selectSnapshot(DataQueries.getById('Mission', this.mission.id));\n                let control = document.getElementById(\"control_refuse_\" + task.id);\n                control.src = SuiviPME.computeTaskImage(task, \"refused\");\n            });\n        }\n    }\n    mainComment(task) {\n        let idInput = task ? \"input_\" + task.id : \"input_general\";\n        let input = document.getElementById(idInput);\n        this.currentTaskId = task ? task.id : null;\n        if (input) {\n            let detailPostId = task ? task.id : null;\n            this.store.dispatch(new CreateSupervision(this.mission.id, detailPostId, null, input.value, this.date.value)).pipe(take(1)).subscribe(() => {\n                this.updatePageOnlyDate();\n            });\n        }\n    }\n}\nSuiviChantierDate.ɵfac = function SuiviChantierDate_Factory(t) { return new (t || SuiviChantierDate)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.PopupService)); };\nSuiviChantierDate.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SuiviChantierDate, selectors: [[\"suivi-chantier_date\"]], inputs: { date: \"date\", mission: \"mission\", reloadMission: \"reloadMission\" }, features: [i0.ɵɵInheritDefinitionFeature], decls: 18, vars: 8, consts: [[3, \"title\"], [1, \"form-input\", 3, \"id\"], [\"class\", \"clear-margin full-width flex center-cross space-arround\", 4, \"ngIf\"], [2, \"height\", \"20px\"], [\"class\", \"taskByDate\", \"style\", \"width:97%\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-input\", 4, \"ngIf\"], [2, \"height\", \"30px\"], [1, \"dashed\", 2, \"margin-left\", \"0 !important\"], [3, \"open\", \"openChange\"], [3, \"click\"], [\"modifyPicture\", \"\"], [1, \"clear-margin\", \"full-width\", \"flex\", \"center-cross\", \"space-arround\"], [2, \"color\", \"#0C5E8D\", \"padding-left\", \"3%\"], [2, \"width\", \"45%\"], [\"src\", \"assets/Option.svg\", 3, \"click\"], [1, \"taskByDate\", 2, \"width\", \"97%\"], [1, \"details\", \"flex\", \"center-cross\", \"space-between\"], [1, \"detail-name\"], [1, \"controls\"], [3, \"id\", \"src\", \"click\"], [\"class\", \"divComment\", 4, \"ngIf\"], [3, \"supervision\"], [1, \"divComment\"], [\"class\", \"inputComment\", \"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 3, \"id\", \"focusout\", 4, \"ngIf\"], [\"src\", \"assets/camera.png\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 1, \"inputComment\", 3, \"id\", \"focusout\"], [1, \"form-input\"], [\"id\", \"input_general\", \"type\", \"text\", \"placeholder\", \"Ajouter un commentaire\", 1, \"inputComment\", 3, \"focusout\"]], template: function SuiviChantierDate_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"accordion\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, SuiviChantierDate_div_2_Template, 5, 0, \"div\", 2);\n        i0.ɵɵelement(3, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, SuiviChantierDate_div_4_Template, 10, 7, \"div\", 4);\n        i0.ɵɵtemplate(5, SuiviChantierDate_div_5_Template, 2, 1, \"div\", 5);\n        i0.ɵɵtemplate(6, SuiviChantierDate_div_6_Template, 6, 0, \"div\", 6);\n        i0.ɵɵelement(7, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"hr\", 8);\n        i0.ɵɵelementStart(9, \"swipeup\", 9);\n        i0.ɵɵlistener(\"openChange\", function SuiviChantierDate_Template_swipeup_openChange_9_listener($event) { return ctx.swipeMenu = $event; });\n        i0.ɵɵelementStart(10, \"li\", 10);\n        i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_10_listener() { return ctx.addDateToPost(); });\n        i0.ɵɵtext(11, \" Modifier les t\\u00E2ches\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"swipeup\", 9, 11);\n        i0.ɵɵlistener(\"openChange\", function SuiviChantierDate_Template_swipeup_openChange_12_listener($event) { return ctx.swipeMenuImage = $event; });\n        i0.ɵɵelementStart(14, \"li\", 10);\n        i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_14_listener() { return ctx.takePhoto(); });\n        i0.ɵɵtext(15, \"Acc\\u00E9dez \\u00E0 l'appareil photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"li\", 10);\n        i0.ɵɵlistener(\"click\", function SuiviChantierDate_Template_li_click_16_listener() { return ctx.selectPhoto(); });\n        i0.ɵɵtext(17, \"T\\u00E9l\\u00E9charger une image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"title\", \"Le \" + ctx.date.value);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"id\", \"taskMain_\", ctx.date.id, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.date.view == \"PME\" && !ctx.mission.isClosed);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.date.selectedTasks);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.date.supervisions);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.mission.isClosed);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"open\", ctx.swipeMenu);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"open\", ctx.swipeMenuImage);\n    } }, styles: [\"accordion[_ngcontent-%COMP%] {\\n  padding: 0 2rem;\\n}\\n\\n.controls[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:first-child {\\n  margin-right: 15px;\\n}\\n\\n.divComment[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  border: 1px solid #0D6191;\\n  border-radius: 20px;\\n  height: 40px;\\n  margin: 15px;\\n  width: 96%;\\n  padding: 10px;\\n}\\n\\n.inputComment[_ngcontent-%COMP%] {\\n  width: 90%;\\n}\\n\\n.detail-name[_ngcontent-%COMP%] {\\n  padding-left: 3%;\\n  width: 80%;\\n}\\n\\n.newDate[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  width: 50%;\\n  margin-left: 25%;\\n  margin-top: 30px;\\n}\\n\\n.liDate[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-around;\\n  width: 90%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1aXZpX2NoYW50aWVyX2RhdGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtBQUNGOztBQUdFO0VBQ0Usa0JBQUE7QUFBSjs7QUFJQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBRUEsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxhQUFBO0FBRkY7O0FBS0E7RUFDRSxVQUFBO0FBRkY7O0FBS0E7RUFDRSxnQkFBQTtFQUNBLFVBQUE7QUFGRjs7QUFLQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0VBQ0EsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUFGRjs7QUFLQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDZCQUFBO0VBQ0EsVUFBQTtBQUZGIiwiZmlsZSI6InN1aXZpX2NoYW50aWVyX2RhdGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYWNjb3JkaW9uIHtcbiAgcGFkZGluZzogMCAycmVtO1xufVxuXG4uY29udHJvbHMge1xuICBpbWc6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgfVxufVxuXG4uZGl2Q29tbWVudCB7XG4gIGRpc3BsYXk6ZmxleDtcbiAgZmxleC1kaXJlY3Rpb246cm93O1xuICBib3JkZXI6MXB4IHNvbGlkICMwRDYxOTEgO1xuICA7XG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gIGhlaWdodDo0MHB4O1xuICBtYXJnaW46MTVweDtcbiAgd2lkdGg6OTYlO1xuICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uaW5wdXRDb21tZW50IHtcbiAgd2lkdGg6OTAlXG59XG5cbi5kZXRhaWwtbmFtZSB7XG4gIHBhZGRpbmctbGVmdDozJTtcbiAgd2lkdGg6ODAlXG59XG5cbi5uZXdEYXRlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246cm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIHdpZHRoOjUwJTtcbiAgbWFyZ2luLWxlZnQ6IDI1JTtcbiAgbWFyZ2luLXRvcDogMzBweDtcbn1cblxuLmxpRGF0ZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOnJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gIHdpZHRoOjkwJTtcbn0iXX0= */\"], changeDetection: 0 });\n"]},"metadata":{},"sourceType":"module"}