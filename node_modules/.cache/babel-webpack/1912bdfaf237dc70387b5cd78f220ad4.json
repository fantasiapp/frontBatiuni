{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { DataQueries, QueryProfile, Snapshot } from \"src/models/new/data.state\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../profile-image/profile-image.component\";\nimport * as i4 from \"../stars/stars.component\";\nimport * as i5 from \"../../pipes/cast.pipe\";\n\nfunction ProfileCardComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"profile-image\", 1);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8, \"Note g\\u00E9n\\u00E9rale (4.5 par 35 personnes)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"stars\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const profile_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"profile\", profile_r1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(profile_r1.company.name || \"Nom de l'entreprise\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Propose \", ctx_r0.employeeCount, \" \", ctx_r0.job.name || \"Employ\\u00E9es\", \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", 4.5);\n  }\n} //maybe merge with sos ?\n\n\nexport class ProfileCardComponent {\n  constructor(store) {\n    this.store = store;\n    this.employeeCount = 0;\n    this.src = '';\n  }\n\n  ngOnInit() {\n    if (this.profile$ == void 0) return;\n    this.profile$.subscribe(profile => {\n      var _a;\n\n      const jobForCompany = this.store.selectSnapshot(DataQueries.getMany('JobForCompany', profile.company.jobs));\n      this.employeeCount = ((_a = jobForCompany.find(({\n        job,\n        number\n      }) => {\n        return job == this.job.id;\n      })) === null || _a === void 0 ? void 0 : _a.number) || 0;\n    });\n  }\n\n}\n\nProfileCardComponent.ɵfac = function ProfileCardComponent_Factory(t) {\n  return new (t || ProfileCardComponent)(i0.ɵɵdirectiveInject(i1.Store));\n};\n\nProfileCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfileCardComponent,\n  selectors: [[\"profile-card\"]],\n  inputs: {\n    profile$: [\"profile\", \"profile$\"],\n    job: \"job\"\n  },\n  decls: 3,\n  vars: 5,\n  consts: [[4, \"ngIf\"], [3, \"profile\"], [1, \"flex\", \"column\", \"small-space-children-margin\", \"font-Poppins\", \"description\"], [\"disabled\", \"\", 3, \"value\"]],\n  template: function ProfileCardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProfileCardComponent_ng_container_0_Template, 10, 5, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵpipe(2, \"cast\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, i0.ɵɵpipeBind1(2, 3, ctx.profile$)));\n    }\n  },\n  directives: [i2.NgIf, i3.UIProfileImageComponent, i4.UIStarsComponent],\n  pipes: [i2.AsyncPipe, i5.CastPipe],\n  styles: [\"[_ngcontent-%COMP%]:root{--notification-size: $notification-size}[_nghost-%COMP%]{position:relative;display:block;border-radius:12px;padding:15px;box-shadow:1px 2px 5px #ddd}profile-image[_ngcontent-%COMP%]{position:absolute;left:0;top:0;transform:scale(.5) translate(-10px,-30px) rotate(45deg)}.description[_ngcontent-%COMP%]{margin-top:80px}\"],\n  changeDetection: 0\n});\n\n__decorate([QueryProfile()], ProfileCardComponent.prototype, \"profile$\", void 0);\n\n__decorate([Snapshot('Job')], ProfileCardComponent.prototype, \"job\", void 0);\n\n;","map":null,"metadata":{},"sourceType":"module"}