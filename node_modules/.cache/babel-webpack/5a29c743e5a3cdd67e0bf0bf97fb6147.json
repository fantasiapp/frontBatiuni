{"ast":null,"code":"import _asyncToGenerator from \"/Users/jlw/Documents/frontBatiuni/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { take } from \"rxjs/operators\";\nimport { Destroy$ } from \"src/app/shared/common/classes\";\nimport { Login } from \"src/models/auth/auth.actions\";\nimport { setErrors } from \"src/validators/verify\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ngxs/store\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../common/formerrors\";\nimport * as i5 from \"@angular/common\";\n\nfunction ConnexionForm_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1, \"Format invalide.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ConnexionForm_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.loginForm.get(\"email\").errors == null ? null : ctx_r1.loginForm.get(\"email\").errors.server, \" \");\n  }\n}\n\nfunction ConnexionForm_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.loginForm.errors == null ? null : ctx_r2.loginForm.errors.server, \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [\"\", \"mail\"];\n};\n\nconst _c1 = function () {\n  return [\"\", \"register\"];\n};\n\nexport class ConnexionForm extends Destroy$ {\n  constructor(router, store, cd) {\n    super();\n    this.router = router;\n    this.store = store;\n    this.cd = cd;\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required // Email()\n      ]),\n      password: new FormControl('', [Validators.required // ComplexPassword()\n      ])\n    }, {});\n    this._errors = [];\n  }\n\n  get errors() {\n    return this._errors;\n  }\n\n  onSubmit(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let {\n        email,\n        password\n      } = _this.loginForm.value;\n\n      _this.store.dispatch(new Login(email, password)).pipe(take(1)).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (success) {\n          const result = yield _this.router.navigate(['', 'home']);\n\n          if (!result) {\n            setErrors(_this.loginForm, {\n              all: 'Erreur inattendue. (500 ?)'\n            });\n\n            _this.cd.markForCheck();\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), errors => {\n        setErrors(_this.loginForm, errors);\n\n        _this.cd.markForCheck();\n      });\n    })();\n  }\n\n}\n\nConnexionForm.ɵfac = function ConnexionForm_Factory(t) {\n  return new (t || ConnexionForm)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.Store), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nConnexionForm.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ConnexionForm,\n  selectors: [[\"connexion-form\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 21,\n  vars: 9,\n  consts: [[1, \"full-height\", \"form-control\", \"curved-border\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-title\"], [1, \"form-input\"], [\"type\", \"email\", \"formControlName\", \"email\", 1, \"form-element\"], [\"class\", \"error\", 4, \"ngIf\"], [\"class\", \"server-error\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-element\"], [1, \"external-links\", \"form-links\", \"block\", \"text-right\", 3, \"routerLink\"], [1, \"form-action\", 2, \"margin-top\", \"auto\"], [1, \"button\", \"discover\", \"gradient\", 2, \"width\", \"250px\", 3, \"disabled\"], [1, \"external-links\", \"form-links\", \"block\", \"center-text\", 3, \"routerLink\"], [1, \"error\"], [1, \"server-error\"]],\n  template: function ConnexionForm_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function ConnexionForm_Template_form_ngSubmit_0_listener($event) {\n        return ctx.onSubmit($event);\n      });\n      i0.ɵɵelementStart(1, \"h3\", 1);\n      i0.ɵɵtext(2, \"Je me connecte\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵelementStart(4, \"label\");\n      i0.ɵɵtext(5, \"Adresse e-mail contact\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"input\", 3);\n      i0.ɵɵtemplate(7, ConnexionForm_div_7_Template, 2, 0, \"div\", 4);\n      i0.ɵɵtemplate(8, ConnexionForm_div_8_Template, 2, 1, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 2);\n      i0.ɵɵelementStart(10, \"label\");\n      i0.ɵɵtext(11, \"Mot de passe\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"a\", 7);\n      i0.ɵɵtext(14, \" Mot de passe oubli\\u00E9 ! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 8);\n      i0.ɵɵtemplate(16, ConnexionForm_div_16_Template, 2, 1, \"div\", 5);\n      i0.ɵɵelementStart(17, \"button\", 9);\n      i0.ɵɵtext(18, \"Se connecter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"a\", 10);\n      i0.ɵɵtext(20, \" Je cr\\u00E9e un compte ! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.get(\"email\").errors == null ? null : ctx.loginForm.get(\"email\").errors.email);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.get(\"email\").errors == null ? null : ctx.loginForm.get(\"email\").errors.server);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.errors == null ? null : ctx.loginForm.errors.server);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.loginForm.touched || ctx.loginForm.status === \"INVALID\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c1));\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i4.ControlErrorsDirective, i5.NgIf, i1.RouterLinkWithHref],\n  styles: [\"\"],\n  changeDetection: 0\n});\n;","map":{"version":3,"sources":["/Users/jlw/Documents/frontBatiuni/src/app/shared/forms/connexion.form.ts"],"names":["FormControl","FormGroup","Validators","take","Destroy$","Login","setErrors","i0","i1","i2","i3","i4","i5","ConnexionForm_div_7_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ConnexionForm_div_8_Template","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate1","loginForm","get","errors","server","ConnexionForm_div_16_Template","ctx_r2","_c0","_c1","ConnexionForm","constructor","router","store","cd","email","required","password","_errors","onSubmit","e","value","dispatch","pipe","subscribe","success","result","navigate","all","markForCheck","ɵfac","ConnexionForm_Factory","t","ɵɵdirectiveInject","Router","Store","ChangeDetectorRef","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","ConnexionForm_Template","ɵɵlistener","ConnexionForm_Template_form_ngSubmit_0_listener","$event","ɵɵelement","ɵɵtemplate","ɵɵproperty","ɵɵpureFunction0","touched","status","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","ControlErrorsDirective","NgIf","RouterLinkWithHref","styles","changeDetection"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { take } from \"rxjs/operators\";\nimport { Destroy$ } from \"src/app/shared/common/classes\";\nimport { Login } from \"src/models/auth/auth.actions\";\nimport { setErrors } from \"src/validators/verify\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ngxs/store\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../common/formerrors\";\nimport * as i5 from \"@angular/common\";\nfunction ConnexionForm_div_7_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1, \"Format invalide.\");\n    i0.ɵɵelementEnd();\n} }\nfunction ConnexionForm_div_8_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.loginForm.get(\"email\").errors == null ? null : ctx_r1.loginForm.get(\"email\").errors.server, \" \");\n} }\nfunction ConnexionForm_div_16_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.loginForm.errors == null ? null : ctx_r2.loginForm.errors.server, \" \");\n} }\nconst _c0 = function () { return [\"\", \"mail\"]; };\nconst _c1 = function () { return [\"\", \"register\"]; };\nexport class ConnexionForm extends Destroy$ {\n    constructor(router, store, cd) {\n        super();\n        this.router = router;\n        this.store = store;\n        this.cd = cd;\n        this.loginForm = new FormGroup({\n            email: new FormControl('', [\n                Validators.required,\n                // Email()\n            ]),\n            password: new FormControl('', [\n                Validators.required,\n                // ComplexPassword()\n            ])\n        }, {});\n        this._errors = [];\n    }\n    get errors() { return this._errors; }\n    async onSubmit(e) {\n        let { email, password } = this.loginForm.value;\n        this.store.dispatch(new Login(email, password))\n            .pipe(take(1)).subscribe(async (success) => {\n            const result = await this.router.navigate(['', 'home']);\n            if (!result) {\n                setErrors(this.loginForm, { all: 'Erreur inattendue. (500 ?)' });\n                this.cd.markForCheck();\n            }\n        }, errors => {\n            setErrors(this.loginForm, errors);\n            this.cd.markForCheck();\n        });\n    }\n}\nConnexionForm.ɵfac = function ConnexionForm_Factory(t) { return new (t || ConnexionForm)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.Store), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\nConnexionForm.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ConnexionForm, selectors: [[\"connexion-form\"]], features: [i0.ɵɵInheritDefinitionFeature], decls: 21, vars: 9, consts: [[1, \"full-height\", \"form-control\", \"curved-border\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-title\"], [1, \"form-input\"], [\"type\", \"email\", \"formControlName\", \"email\", 1, \"form-element\"], [\"class\", \"error\", 4, \"ngIf\"], [\"class\", \"server-error\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-element\"], [1, \"external-links\", \"form-links\", \"block\", \"text-right\", 3, \"routerLink\"], [1, \"form-action\", 2, \"margin-top\", \"auto\"], [1, \"button\", \"discover\", \"gradient\", 2, \"width\", \"250px\", 3, \"disabled\"], [1, \"external-links\", \"form-links\", \"block\", \"center-text\", 3, \"routerLink\"], [1, \"error\"], [1, \"server-error\"]], template: function ConnexionForm_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function ConnexionForm_Template_form_ngSubmit_0_listener($event) { return ctx.onSubmit($event); });\n        i0.ɵɵelementStart(1, \"h3\", 1);\n        i0.ɵɵtext(2, \"Je me connecte\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"label\");\n        i0.ɵɵtext(5, \"Adresse e-mail contact\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"input\", 3);\n        i0.ɵɵtemplate(7, ConnexionForm_div_7_Template, 2, 0, \"div\", 4);\n        i0.ɵɵtemplate(8, ConnexionForm_div_8_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 2);\n        i0.ɵɵelementStart(10, \"label\");\n        i0.ɵɵtext(11, \"Mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"a\", 7);\n        i0.ɵɵtext(14, \" Mot de passe oubli\\u00E9 ! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 8);\n        i0.ɵɵtemplate(16, ConnexionForm_div_16_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementStart(17, \"button\", 9);\n        i0.ɵɵtext(18, \"Se connecter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"a\", 10);\n        i0.ɵɵtext(20, \" Je cr\\u00E9e un compte ! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.loginForm.get(\"email\").errors == null ? null : ctx.loginForm.get(\"email\").errors.email);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loginForm.get(\"email\").errors == null ? null : ctx.loginForm.get(\"email\").errors.server);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loginForm.errors == null ? null : ctx.loginForm.errors.server);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.loginForm.touched || ctx.loginForm.status === \"INVALID\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c1));\n    } }, directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i4.ControlErrorsDirective, i5.NgIf, i1.RouterLinkWithHref], styles: [\"\"], changeDetection: 0 });\n;\n"]},"metadata":{},"sourceType":"module"}