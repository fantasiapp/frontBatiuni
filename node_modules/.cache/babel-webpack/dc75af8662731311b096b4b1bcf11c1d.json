{"ast":null,"code":"import { Subject } from \"rxjs\";\nimport { take } from \"rxjs/operators\";\nimport { DataQueries } from \"src/models/new/data.state\";\nimport { DeletePost } from \"src/models/new/user/user.actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nimport * as i2 from \"../popup/popup.component\";\nimport * as i3 from \"@angular/common\";\n\nfunction OfferComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"p\", 3);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 5);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 7);\n    i0.ɵɵelement(12, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate((ctx_r0.company == null ? null : ctx_r0.company.name) || \"Entreprise\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((ctx_r0.post == null ? null : ctx_r0.post.manPower) ? \"Man d'oeuvre\" : \"Fourniture et Pose\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((ctx_r0.post == null ? null : ctx_r0.post.address) || \"addresse\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((ctx_r0.post == null ? null : ctx_r0.post.dueDate) ? ctx_r0.toLocateDate(ctx_r0.post.dueDate) : \"19 Janvier 2038\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r0.src, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let OfferComponent = /*#__PURE__*/(() => {\n  class OfferComponent {\n    constructor(store, popup) {\n      this.store = store;\n      this.popup = popup;\n      this.src = \"assets/confirmation.svg\";\n      this.deletable = false;\n      this.company = null;\n    }\n\n    onPress(e) {\n      if (this.deletable) {\n        const subject = new Subject();\n        subject.pipe(take(1)).subscribe(result => {\n          if (result) this.deletePost();\n          this.popup.hide();\n        });\n        this.popup.openDeletePostDialog(subject);\n      }\n    }\n\n    get post() {\n      return this._post;\n    }\n\n    set post(p) {\n      this._post = p;\n      this.company = p ? this.store.selectSnapshot(DataQueries.getById('Company', p.company)) : null;\n    }\n\n    deletePost() {\n      this.store.dispatch(new DeletePost(this.post.id));\n    }\n\n    toLocateDate(date) {\n      return date ? new Date(date).toLocaleDateString('fr') : \"(Non renseigné)\";\n    }\n\n  }\n\n  OfferComponent.ɵfac = function OfferComponent_Factory(t) {\n    return new (t || OfferComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.PopupService));\n  };\n\n  OfferComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OfferComponent,\n    selectors: [[\"offer\"]],\n    hostBindings: function OfferComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"press\", function OfferComponent_press_HostBindingHandler() {\n          return ctx.onPress();\n        });\n      }\n    },\n    inputs: {\n      src: \"src\",\n      deletable: \"deletable\",\n      post: \"post\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [1, \"container\", \"grow\", \"flex\", \"center-cross\", \"space-between\"], [1, \"offres-infos\"], [1, \"entreprise\"], [1, \"metier\"], [1, \"address\"], [1, \"date\"], [1, \"offres-logo\", \"flex\", \"center\"], [3, \"src\"]],\n    template: function OfferComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OfferComponent_ng_container_0_Template, 13, 5, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.post);\n      }\n    },\n    directives: [i3.NgIf],\n    styles: [\".page-content-with-tabs[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;touch-action:pan-y!important}.page-content-with-tabs[_ngcontent-%COMP%]{margin-top:150px;margin-top:calc(constant(safe-area-inset-top) + 150px);margin-top:calc(env(safe-area-inset-top) + 150px);margin-bottom:0;margin-bottom:calc(constant(safe-area-inset-bottom) + 0);margin-bottom:calc(env(safe-area-inset-bottom) + 0);height:calc(100vh - 220px - env(safe-area-inset-bottom))}.invert[_ngcontent-%COMP%]{filter:invert(1)}[_ngcontent-%COMP%]:root{--notification-size: $notification-size}[_nghost-%COMP%]{position:relative;right:0;display:flex}.address[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;text-overflow:ellipsis}.container[_ngcontent-%COMP%]{display:flex;background:white;box-shadow:0 5px 3px #959da533;padding:10px 20px;color:#999;border-radius:12px;justify-content:center;margin-bottom:1rem;flex-shrink:0;width:100%}.offres-infos[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden}p[_ngcontent-%COMP%]{margin:.6em}.metier[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{color:#333}.adresse[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;font-weight:300}.showDesktopOption[_ngcontent-%COMP%]{padding:1rem;position:absolute;background-color:#fff;min-width:160px;overflow:auto;border-radius:12px;right:0;box-shadow:0 8px 16px #0003;z-index:1500}.showDesktopOption[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none}\"],\n    changeDetection: 0\n  });\n  return OfferComponent;\n})();\n;","map":null,"metadata":{},"sourceType":"module"}