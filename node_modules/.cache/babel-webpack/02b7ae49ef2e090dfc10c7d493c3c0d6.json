{"ast":null,"code":"import { TemplateRef, ViewContainerRef } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { UIOpenMenu } from \"src/app/shared/common/classes\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"view\"];\nconst _c1 = [\"menuTemplate\"];\n\nfunction UISwipeupComponent_ul_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 8);\n    i0.ɵɵprojection(1);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UISwipeupComponent_ul_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 9);\n    i0.ɵɵprojection(1, 1);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UISwipeupComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0, null, 10);\n  }\n}\n\nfunction UISwipeupComponent_ng_template_7_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 13);\n    i0.ɵɵlistener(\"click\", function UISwipeupComponent_ng_template_7_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const item_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.onListItemClicked(item_r9);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    i0.ɵɵclassMap(item_r9.class || \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r9.name, \" \");\n  }\n}\n\nfunction UISwipeupComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 11);\n    i0.ɵɵtemplate(1, UISwipeupComponent_ng_template_7_li_1_Template, 2, 3, \"li\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const menu_r6 = ctx.$implicit;\n    const items_r7 = ctx.items;\n    i0.ɵɵclassMap(menu_r6.class);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", items_r7);\n  }\n}\n\nconst _c2 = [\"*\", [[\"\", \"view\", \"\"]]];\nconst _c3 = [\"*\", \"[view]\"];\nconst TRANSITION_DURATION = 250;\nexport let UISwipeupComponent = /*#__PURE__*/(() => {\n  class UISwipeupComponent extends UIOpenMenu {\n    constructor(cd, componentFactoryResolver, swipeupService) {\n      super();\n      this.cd = cd;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.swipeupService = swipeupService;\n      this.type = 'list';\n      this.fromService = false;\n      this.keepAlive = true;\n      this.willClose = false; //extends destroy, no multiple inheritance :(\n\n      this.destroy$ = new Subject();\n    }\n\n    ngOnInit() {\n      if (!this.fromService) return; //factorize this\n\n      this.swipeupService.views$.pipe(takeUntil(this.destroy$)).subscribe(view => {\n        if (!view) return this.close();\n        if (!this.view) return; //ignore\n\n        this.view.clear();\n\n        if (view.type == 'context') {\n          if (!this.content || this.content.type != 'template') return;\n          this.content.context = view.context;\n          this.view.createEmbeddedView(this.content.template, this.content.context);\n        } else if (view.type == 'template') {\n          this.content = view;\n          this.view.createEmbeddedView(this.content.template, this.content.context);\n        } else if (view.type == 'component') {\n          this.content = view;\n          const factory = this.componentFactoryResolver.resolveComponentFactory(this.content.component),\n                componentRef = this.view.createComponent(factory);\n          if (this.content.init) this.content.init(componentRef.instance);\n        } else {\n          this.content = view;\n          this.view.createEmbeddedView(this.menuTemplate, {\n            $implicit: view,\n            items: view.items\n          });\n        }\n\n        this.open = true;\n        this.cd.markForCheck();\n      });\n    }\n\n    close() {\n      this.willClose = true;\n      setTimeout(() => {\n        var _a;\n\n        if (!this.keepAlive) (_a = this.view) === null || _a === void 0 ? void 0 : _a.clear();\n        this.willClose = false;\n        this._open = false;\n        this.openChange.emit(this._open = false); //this saves cd.markForCheck() ??\n\n        this.cd.markForCheck();\n      }, TRANSITION_DURATION);\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    onListItemClicked(item) {\n      var _a;\n\n      (_a = item.click) === null || _a === void 0 ? void 0 : _a.call(item);\n      if (this.content.hideOnClick) this.close();\n    }\n\n  }\n\n  UISwipeupComponent.ɵfac = function UISwipeupComponent_Factory(t) {\n    return new (t || UISwipeupComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(SwipeupService));\n  };\n\n  UISwipeupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UISwipeupComponent,\n    selectors: [[\"swipeup\"]],\n    viewQuery: function UISwipeupComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5, ViewContainerRef);\n        i0.ɵɵviewQuery(_c1, 7, TemplateRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.view = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.menuTemplate = _t.first);\n      }\n    },\n    inputs: {\n      content: \"content\",\n      type: \"type\",\n      fromService: \"fromService\",\n      keepAlive: \"keepAlive\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c3,\n    decls: 9,\n    vars: 5,\n    consts: [[1, \"cover-parent\", 3, \"click\"], [1, \"menu\", \"full-width\"], [1, \"decoration\", \"background-white\", 3, \"click\"], [\"class\", \"list background-white font-Poppins text-light-emphasis content\", 4, \"ngIf\"], [\"class\", \"content background-white hosted-page\", 4, \"ngIf\"], [1, \"content\", \"background-white\"], [4, \"ngIf\"], [\"menuTemplate\", \"\"], [1, \"list\", \"background-white\", \"font-Poppins\", \"text-light-emphasis\", \"content\"], [1, \"content\", \"background-white\", \"hosted-page\"], [\"view\", \"\"], [1, \"list\", \"background-white\", \"font-Poppins\", \"text-light-emphasis\"], [3, \"class\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n    template: function UISwipeupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef(_c2);\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"click\", function UISwipeupComponent_Template_div_click_0_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵlistener(\"click\", function UISwipeupComponent_Template_div_click_2_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, UISwipeupComponent_ul_3_Template, 2, 0, \"ul\", 3);\n        i0.ɵɵtemplate(4, UISwipeupComponent_ul_4_Template, 2, 0, \"ul\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtemplate(6, UISwipeupComponent_ng_container_6_Template, 2, 0, \"ng-container\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, UISwipeupComponent_ng_template_7_Template, 2, 3, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"open\", ctx.open && !ctx.willClose);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.type == \"list\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.type == \"view\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.fromService);\n      }\n    },\n    directives: [i1.NgIf, i1.NgForOf],\n    styles: [\"[_ngcontent-%COMP%]:root{--notification-size: $notification-size}.page-content-with-tabs[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;touch-action:pan-y!important}.page-content-with-tabs[_ngcontent-%COMP%]{margin-top:150px;margin-top:calc(constant(safe-area-inset-top) + 150px);margin-top:calc(env(safe-area-inset-top) + 150px);margin-bottom:0;margin-bottom:calc(constant(safe-area-inset-bottom) + 0);margin-bottom:calc(env(safe-area-inset-bottom) + 0);height:calc(100vh - 220px - env(safe-area-inset-bottom))}.invert[_ngcontent-%COMP%]{filter:invert(1)}[_nghost-%COMP%]{position:fixed;top:0;left:0;z-index:100;width:100%;height:100vh;visibility:hidden;cursor:pointer}.open[_nghost-%COMP%]{visibility:visible}.cover-parent[_ngcontent-%COMP%]{background-color:#ccc;opacity:.5;z-index:-1}.menu[_ngcontent-%COMP%]{position:absolute}.menu[_ngcontent-%COMP%]{bottom:0;transform:translateY(100%);transition:transform .25s ease-out 0s;max-height:45vh}.menu.open[_ngcontent-%COMP%]{transform:translateY(0)}.decoration[_ngcontent-%COMP%]{position:relative;height:50px;border-top-left-radius:25px;border-top-right-radius:25px}.decoration[_ngcontent-%COMP%]:after{content:\\\"\\\";display:block;background-color:#aaa;height:3px;width:40px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.list[_ngcontent-%COMP%]{font-size:.9em;list-style-type:none;padding:20px 60px;padding-bottom:calc(constant(safe-area-inset-bottom) + 20px);padding-bottom:calc(env(safe-area-inset-bottom) + 20px)}.list[_ngcontent-%COMP%]     img{width:25px;height:25px;vertical-align:middle;position:relative;left:-20px}.list[_ngcontent-%COMP%]  li:not(:last-of-type){margin-bottom:15px}.content[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(45vh - 50px)}\"],\n    changeDetection: 0\n  });\n  return UISwipeupComponent;\n})();\n;\nexport let SwipeupService = /*#__PURE__*/(() => {\n  class SwipeupService {\n    constructor() {\n      this.views$ = new Subject();\n    }\n\n    show(view) {\n      this.views$.next(view);\n    }\n\n    hide() {\n      this.views$.next(undefined);\n    }\n\n    updateTemplate(context) {\n      this.views$.next({\n        type: 'context',\n        context\n      });\n    }\n\n  }\n\n  SwipeupService.ɵfac = function SwipeupService_Factory(t) {\n    return new (t || SwipeupService)();\n  };\n\n  SwipeupService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: SwipeupService,\n    factory: SwipeupService.ɵfac,\n    providedIn: 'root'\n  });\n  return SwipeupService;\n})();\n;","map":null,"metadata":{},"sourceType":"module"}