{"ast":null,"code":"import _asyncToGenerator from \"/Users/jlw/Documents/frontBatiuni/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { EventEmitter } from \"@angular/core\";\nimport { FormArray, FormControl, FormGroup } from \"@angular/forms\";\nimport { Camera } from \"@capacitor/camera\";\nimport { SlidesDirective } from \"../directives/slides.directive\";\nimport { defaultFileUIOuput } from \"../components/filesUI/files.ui\";\nimport { FieldType } from \"src/validators/verify\";\nimport { DataQueries, SnapshotAll } from \"src/models/new/data.state\";\nimport { SpacingPipe } from \"../pipes/spacing.pipe\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nimport * as i2 from \"../directives/slides.directive\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../common/formerrors\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../components/box/radiobox.component\";\nimport * as i7 from \"../components/filesUI/files.ui\";\nimport * as i8 from \"../components/FileIcon/file.icon\";\nimport * as i9 from \"../components/number/number.component\";\nimport * as i10 from \"../components/options/options\";\n\nfunction ModifyProfileForm_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 8);\n    i0.ɵɵelementStart(1, \"form\", 9);\n    i0.ɵɵelementStart(2, \"h3\", 10);\n    i0.ɵɵtext(3, \" Infos personelles: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6, \"Nom du contact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 11);\n    i0.ɵɵelementStart(9, \"label\");\n    i0.ɵɵtext(10, \"Pr\\u00E9nom du contact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 11);\n    i0.ɵɵelementStart(13, \"label\");\n    i0.ɵɵtext(14, \"Adresse e-mail contact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 11);\n    i0.ɵɵelementStart(17, \"label\");\n    i0.ɵɵtext(18, \"T\\u00E9l\\u00E9phone de l'entreprise\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 11);\n    i0.ɵɵelementStart(21, \"label\");\n    i0.ɵɵtext(22, \"T\\u00E9l\\u00E9phone portable\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 11);\n    i0.ɵɵelementStart(25, \"label\");\n    i0.ɵɵtext(26, \"Fonction dans l'entreprise\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_3_ng_container_13_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 49);\n    i0.ɵɵelementContainerStart(1, 50);\n    i0.ɵɵelementStart(2, \"span\", 51);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 52);\n    i0.ɵɵelement(5, \"number\", 53);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r10 = ctx.$implicit;\n    const i_r11 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r11);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(control_r10.get(\"job\").value.name);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_3_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵtext(2, \"M\\u00E9tiers\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerStart(3, 45);\n    i0.ɵɵtemplate(4, ModifyProfileForm_ng_template_3_ng_container_13_span_4_Template, 6, 2, \"span\", 46);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementStart(5, \"div\", 47);\n    i0.ɵɵlistener(\"click\", function ModifyProfileForm_ng_template_3_ng_container_13_Template_div_click_5_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.addingField = true;\n    });\n    i0.ɵɵelement(6, \"img\", 48);\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8, \"Ajouter un m\\u00E9tier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.companyJobsControls);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_3_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1, \"Ajoutez des m\\u00E9tiers\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(2, \"options\", 54, 55);\n    i0.ɵɵelementStart(4, \"div\", 56);\n    i0.ɵɵelementStart(5, \"button\", 57);\n    i0.ɵɵlistener(\"click\", function ModifyProfileForm_ng_template_3_ng_template_14_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r16);\n\n      const _r14 = i0.ɵɵreference(3);\n\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.updateJobs(_r14.value);\n    });\n    i0.ɵɵtext(6, \" Terminer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"options\", ctx_r8.allJobs)(\"value\", ctx_r8.selectedJobs);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 8);\n    i0.ɵɵelementStart(1, \"form\", 18);\n    i0.ɵɵelementStart(2, \"h3\", 10);\n    i0.ɵɵtext(3, \" Infos entreprise: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6, \"Nom de l'entreprise\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 11);\n    i0.ɵɵelementStart(9, \"label\");\n    i0.ɵɵtext(10, \"N SIRET\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 21);\n    i0.ɵɵtemplate(13, ModifyProfileForm_ng_template_3_ng_container_13_Template, 9, 1, \"ng-container\", 22);\n    i0.ɵɵtemplate(14, ModifyProfileForm_ng_template_3_ng_template_14_Template, 7, 2, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 11);\n    i0.ɵɵelementStart(17, \"label\");\n    i0.ɵɵtext(18, \"\\u00CAtes vous une entreprise TCE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 24);\n    i0.ɵɵelementStart(20, \"div\", 25);\n    i0.ɵɵelement(21, \"radiobox\", 26);\n    i0.ɵɵelementStart(22, \"span\");\n    i0.ɵɵtext(23, \"Non\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 25);\n    i0.ɵɵelement(25, \"radiobox\", 26);\n    i0.ɵɵelementStart(26, \"span\");\n    i0.ɵɵtext(27, \"Oui\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 11);\n    i0.ɵɵelementStart(29, \"label\");\n    i0.ɵɵtext(30, \"\\u00CAtes-vous disponible pour des missions les samedis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 24);\n    i0.ɵɵelementStart(32, \"div\", 25);\n    i0.ɵɵelement(33, \"radiobox\", 27);\n    i0.ɵɵelementStart(34, \"span\");\n    i0.ɵɵtext(35, \"Non\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 25);\n    i0.ɵɵelement(37, \"radiobox\", 27);\n    i0.ɵɵelementStart(38, \"span\");\n    i0.ɵɵtext(39, \"Oui\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"div\", 11);\n    i0.ɵɵelementStart(41, \"label\");\n    i0.ɵɵtext(42, \"Site internet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(43, \"input\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"div\", 11);\n    i0.ɵɵelementStart(45, \"label\");\n    i0.ɵɵtext(46, \"Chiffres d'affaires\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(47, \"input\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"div\", 11);\n    i0.ɵɵelementStart(49, \"label\");\n    i0.ɵɵtext(50, \"Capital\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(51, \"input\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"div\", 11);\n    i0.ɵɵelementStart(53, \"label\");\n    i0.ɵɵtext(54, \"Taux horaire moyen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(55, \"input\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerStart(56, 32);\n    i0.ɵɵelementStart(57, \"fileinput\", 33);\n    i0.ɵɵelement(58, \"file-svg\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"fileinput\", 35);\n    i0.ɵɵelement(60, \"file-svg\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"fileinput\", 37);\n    i0.ɵɵelement(62, \"file-svg\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(63, \"fileinput\", 39);\n    i0.ɵɵelement(64, \"file-svg\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(65, \"fileinput\", 41);\n    i0.ɵɵelement(66, \"file-svg\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(67, \"fileinput\", 43);\n    i0.ɵɵelement(68, \"file-svg\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(15);\n\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.form);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.addingField)(\"ngIfElse\", _r7);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"onselect\", false);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"onselect\", true);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"onselect\", false);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"onselect\", true);\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"showtitle\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"showtitle\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"showtitle\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"showtitle\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"showtitle\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"showtitle\", false);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_5_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵelementContainerStart(1, 50);\n    i0.ɵɵelementStart(2, \"fileinput\", 63);\n    i0.ɵɵelement(3, \"file-svg\", 64);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r19 = ctx.$implicit;\n    const i_r20 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r20);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"showtitle\", false)(\"filename\", control_r19.get(\"label\").value.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r19.get(\"label\").value.name);\n  }\n}\n\nfunction ModifyProfileForm_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 8);\n    i0.ɵɵelementStart(1, \"form\", 18);\n    i0.ɵɵelementStart(2, \"h3\", 10);\n    i0.ɵɵtext(3, \" Certifications & labels: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6, \"Vos labels\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"options\", 58, 59);\n    i0.ɵɵlistener(\"valueChange\", function ModifyProfileForm_ng_template_5_Template_options_valueChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.updateLabels($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerStart(9, 60);\n    i0.ɵɵtemplate(10, ModifyProfileForm_ng_template_5_span_10_Template, 4, 4, \"span\", 61);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r5.form);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"options\", ctx_r5.allLabels)(\"value\", ctx_r5.selectedLabels);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.companyLabelControls);\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return [a0, a1, a2];\n};\n\nexport class ModifyProfileForm {\n  constructor(store) {\n    this.store = store;\n    this.submit = new EventEmitter();\n    this.index = 0;\n    this.animate = true;\n    this.form = new FormGroup({\n      // User\n      'UserProfile.lastName': new FormControl('', []),\n      'UserProfile.firstName': new FormControl('', []),\n      'UserProfile.userName': new FormControl('', [//Email()\n      ]),\n      'UserProfile.cellPhone': new FormControl('', [FieldType('phone')]),\n      'UserProfile.function': new FormControl('', []),\n      'UserProfile.Company.JobForCompany': new FormArray([]),\n      //Company\n      'UserProfile.Company.name': new FormControl('', []),\n      'UserProfile.Company.siret': new FormControl('', [FieldType('number', ['un numéro de SIRET'])]),\n      'UserProfile.Company.capital': new FormControl('', [FieldType('number')]),\n      'UserProfile.Company.revenue': new FormControl('', [FieldType('number')]),\n      'UserProfile.Company.amount': new FormControl('', [FieldType('number')]),\n      'UserProfile.Company.allQualifications': new FormControl('', []),\n      'UserProfile.Company.saturdayDisponibility': new FormControl('', []),\n      'UserProfile.Company.webSite': new FormControl('', [FieldType('url')]),\n      'UserProfile.Company.companyPhone': new FormControl('', [FieldType('phone')]),\n      'UserProfile.Company.LabelForCompany': new FormArray([]),\n      'UserProfile.Company.admin': new FormGroup({\n        'Kbis': new FormControl(defaultFileUIOuput('admin')),\n        'Trav. Dis': new FormControl(defaultFileUIOuput('admin')),\n        'RC + DC': new FormControl(defaultFileUIOuput('admin')),\n        'URSSAF': new FormControl(defaultFileUIOuput('admin')),\n        'Impôts': new FormControl(defaultFileUIOuput('admin')),\n        'Congés Payés': new FormControl(defaultFileUIOuput('admin'))\n      })\n    });\n    this.addingField = false;\n  }\n\n  onSwipeLeft() {\n    this.slider.left();\n  }\n\n  onSwipeRight() {\n    this.slider.right();\n  } //outputs\n\n\n  onSubmit() {\n    this.submit.emit(this.form);\n  }\n\n  get companyJobsControls() {\n    return this.form.controls['UserProfile.Company.JobForCompany'].controls;\n  }\n\n  get companyLabelControls() {\n    return this.form.controls['UserProfile.Company.LabelForCompany'].controls;\n  }\n\n  ngOnInit() {\n    return _asyncToGenerator(function* () {\n      let permissions = yield Camera.checkPermissions();\n      if (permissions.camera != 'granted' || permissions.photos != 'granted') try {\n        yield Camera.requestPermissions({\n          permissions: [\"camera\", \"photos\"]\n        });\n      } catch (e) {}\n    })();\n  }\n\n  ngOnChanges(changes) {\n    if (changes['profile']) this.reload();\n  }\n\n  space(value, each = 2, by = 1) {\n    return SpacingPipe.prototype.transform(value, each, by);\n  }\n\n  reload() {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n\n    const {\n      user,\n      company\n    } = this.profile;\n    console.log(\"reload\", company.saturdayDisponibility);\n    this.companyFiles = this.store.selectSnapshot(DataQueries.getMany('File', this.profile.company.files));\n    this.companyLabels = this.store.selectSnapshot(DataQueries.getMany('LabelForCompany', this.profile.company.labels));\n    this.companyJobs = this.store.selectSnapshot(DataQueries.getMany('JobForCompany', this.profile.company.jobs));\n    const jobMapping = new Map(),\n          labelMapping = new Map();\n    this.selectedJobs = [];\n    this.allJobs.forEach(job => {\n      const used = this.companyJobs.find(jobForCompany => jobForCompany.job == job.id);\n\n      if (used) {\n        jobMapping.set(used.id, job);\n        this.selectedJobs.push(job);\n      }\n    });\n    this.selectedLabels = [];\n    this.allLabels.forEach(label => {\n      const used = this.companyLabels.find(labelForCompany => labelForCompany.label == label.id);\n\n      if (used) {\n        labelMapping.set(used.id, label);\n        this.selectedLabels.push(label);\n      }\n    });\n    console.log('> selected', this.selectedLabels);\n    const filesInput = this.form.controls['UserProfile.Company.admin'];\n    this.companyFiles.forEach(({\n      name\n    }) => {\n      var _a;\n\n      (_a = filesInput.get(name)) === null || _a === void 0 ? void 0 : _a.patchValue({\n        name\n      });\n    });\n    (_a = this.form.controls['UserProfile.lastName']) === null || _a === void 0 ? void 0 : _a.setValue(user.lastName);\n    (_b = this.form.controls['UserProfile.firstName']) === null || _b === void 0 ? void 0 : _b.setValue(user.firstName);\n    (_c = this.form.controls['UserProfile.userName']) === null || _c === void 0 ? void 0 : _c.setValue(user.username);\n    (_d = this.form.controls['UserProfile.cellPhone']) === null || _d === void 0 ? void 0 : _d.setValue(this.space(user.cellPhone));\n    (_e = this.form.controls['UserProfile.function']) === null || _e === void 0 ? void 0 : _e.setValue(user.function);\n    (_f = this.form.controls['UserProfile.Company.name']) === null || _f === void 0 ? void 0 : _f.setValue(company.name);\n    (_g = this.form.controls['UserProfile.Company.siret']) === null || _g === void 0 ? void 0 : _g.setValue(company.siret);\n    (_h = this.form.controls['UserProfile.Company.revenue']) === null || _h === void 0 ? void 0 : _h.setValue(company.revenue);\n    (_j = this.form.controls['UserProfile.Company.capital']) === null || _j === void 0 ? void 0 : _j.setValue(company.capital);\n    (_k = this.form.controls['UserProfile.Company.amount']) === null || _k === void 0 ? void 0 : _k.setValue(company.amount);\n    (_l = this.form.controls['UserProfile.Company.allQualifications']) === null || _l === void 0 ? void 0 : _l.setValue(company.allQualifications);\n    (_m = this.form.controls['UserProfile.Company.saturdayDisponibility']) === null || _m === void 0 ? void 0 : _m.setValue(company.saturdayDisponibility);\n    (_o = this.form.controls['UserProfile.Company.webSite']) === null || _o === void 0 ? void 0 : _o.setValue(company.webSite);\n    (_p = this.form.controls['UserProfile.Company.companyPhone']) === null || _p === void 0 ? void 0 : _p.setValue(this.space(company.companyPhone));\n    const jobControl = this.form.controls['UserProfile.Company.JobForCompany'];\n    jobControl.clear();\n\n    for (let jobForCompany of this.companyJobs) {\n      const jobObject = jobMapping.get(jobForCompany.id);\n      jobControl.push(new FormGroup({\n        job: new FormControl(jobObject),\n        number: new FormControl(jobForCompany.number)\n      }));\n    }\n\n    const labelControl = this.form.controls['UserProfile.Company.LabelForCompany'];\n    labelControl.clear();\n\n    for (let labelForCompany of this.companyLabels) {\n      const labelObject = labelMapping.get(labelForCompany.id);\n      labelControl.push(new FormGroup({\n        label: new FormControl(labelObject),\n        //get date from server\n        fileData: new FormControl(defaultFileUIOuput(labelObject.name, labelForCompany.date, `Fichier \"${labelObject.name}\" pris en compte`))\n      }));\n    }\n  } //make functions to help merge\n\n\n  updateJobs(jobOptions) {\n    this.addingField = false;\n    const oldJobs = this.selectedJobs,\n          newJobs = jobOptions,\n          oldJobsId = new Set(oldJobs.map(({\n      id\n    }) => id)),\n          overlap = newJobs.filter(job => oldJobsId.has(job.id)),\n          difference = newJobs.filter(job => !oldJobsId.has(job.id));\n    let jobControl = this.form.controls['UserProfile.Company.JobForCompany'];\n    jobControl.clear();\n\n    for (const item of difference) jobControl.push(new FormGroup({\n      job: new FormControl(item),\n      number: new FormControl(1)\n    }));\n\n    for (const item of overlap) {\n      const target = this.companyJobs.find(jobForCompany => jobForCompany.job == item.id);\n      jobControl.push(new FormGroup({\n        job: new FormControl(item),\n        number: new FormControl(target.number)\n      }));\n    }\n\n    this.selectedJobs = jobOptions;\n    jobControl.markAsDirty();\n  }\n\n  //bad function\n  //put the actual file if target is found\n  //and mark this field as untouched\n  updateLabels(labelOptions) {\n    this.addingField = false;\n    const newLabels = labelOptions;\n    let labelControl = this.form.controls['UserProfile.Company.LabelForCompany'];\n    labelControl.clear();\n\n    for (const item of newLabels) {\n      const target = this.companyLabels.find(labelForCompany => labelForCompany.label == item.id);\n      labelControl.push(new FormGroup({\n        label: new FormControl(item),\n        fileData: new FormControl(defaultFileUIOuput(item.name, (target === null || target === void 0 ? void 0 : target.date) || '', `Veillez télécharger un document.`))\n      }));\n    }\n\n    this.selectedLabels = labelOptions;\n    labelControl.markAsDirty();\n  }\n\n}\n\nModifyProfileForm.ɵfac = function ModifyProfileForm_Factory(t) {\n  return new (t || ModifyProfileForm)(i0.ɵɵdirectiveInject(i1.Store));\n};\n\nModifyProfileForm.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModifyProfileForm,\n  selectors: [[\"modify-profile-form\"]],\n  viewQuery: function ModifyProfileForm_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(SlidesDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.slider = _t.first);\n    }\n  },\n  hostBindings: function ModifyProfileForm_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"swipeleft\", function ModifyProfileForm_swipeleft_HostBindingHandler() {\n        return ctx.onSwipeLeft();\n      })(\"swiperight\", function ModifyProfileForm_swiperight_HostBindingHandler() {\n        return ctx.onSwipeRight();\n      });\n    }\n  },\n  inputs: {\n    index: \"index\",\n    animate: \"animate\",\n    profile: \"profile\",\n    user: \"user\"\n  },\n  outputs: {\n    submit: \"submit\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 14,\n  vars: 14,\n  consts: [[\"type\", \"template\", 3, \"slides\", \"index\", \"animate\", \"indexChange\"], [\"modifyPage1\", \"\"], [\"modifyPage2\", \"\"], [\"modifyPage3\", \"\"], [1, \"mid-sticky-footer\"], [1, \"form-step\"], [3, \"click\"], [1, \"button\", \"gradient\", \"full-width\", 3, \"disabled\", \"click\"], [1, \"full-width\", \"section\"], [1, \"form-control\", 3, \"formGroup\"], [1, \"form-title\", \"font-Roboto\"], [1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.lastName\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.firstName\", 1, \"form-element\"], [\"type\", \"email\", \"formControlName\", \"UserProfile.userName\", 1, \"form-element\"], [\"type\", \"tel\", \"formControlName\", \"UserProfile.Company.companyPhone\", 1, \"form-element\"], [\"type\", \"tel\", \"formControlName\", \"UserProfile.cellPhone\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.function\", 1, \"form-element\"], [1, \"full-width\", \"form-control\", 3, \"formGroup\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.name\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.siret\", 1, \"form-element\"], [1, \"form-input\", \"metiers\"], [4, \"ngIf\", \"ngIfElse\"], [\"addfield_tpl\", \"\"], [1, \"flex\", \"row\", \"radio-container\"], [1, \"radio-item\"], [\"formControlName\", \"UserProfile.Company.allQualifications\", 1, \"grow\", 3, \"onselect\"], [\"formControlName\", \"UserProfile.Company.saturdayDisponibility\", 1, \"grow\", 3, \"onselect\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.webSite\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.capital\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.revenue\", 1, \"form-element\"], [\"type\", \"text\", \"formControlName\", \"UserProfile.Company.amount\", 1, \"form-element\"], [\"formGroupName\", \"UserProfile.Company.admin\"], [\"filename\", \"Kbis\", \"formControlName\", \"Kbis\", 3, \"showtitle\"], [\"name\", \"Kbis\", \"color\", \"#156C9D\", \"image\", \"\"], [\"filename\", \"Attestation travail dissimul\\u00E9\", \"formControlName\", \"Trav. Dis\", 3, \"showtitle\"], [\"name\", \"Trav. Dis\", \"color\", \"#054162\", \"image\", \"\"], [\"filename\", \"Attestation RC + DC\", \"formControlName\", \"RC + DC\", 3, \"showtitle\"], [\"name\", \"RC + DC\", \"color\", \"#999999\", \"image\", \"\"], [\"filename\", \"URSSAF\", \"formControlName\", \"URSSAF\", 3, \"showtitle\"], [\"name\", \"URSSAF\", \"color\", \"#F9C067\", \"image\", \"\"], [\"filename\", \"Imp\\u00F4ts\", \"formControlName\", \"Imp\\u00F4ts\", 3, \"showtitle\"], [\"name\", \"Imp\\u00F4ts\", \"color\", \"#52D1BD\", \"image\", \"\"], [\"filename\", \"Cong\\u00E9s pay\\u00E9s\", \"formControlName\", \"Cong\\u00E9s Pay\\u00E9s\", 3, \"showtitle\"], [\"name\", \"Cong\\u00E9s Pay\\u00E9s\", \"color\", \"#32A290\", \"image\", \"\"], [\"formArrayName\", \"UserProfile.Company.JobForCompany\"], [\"class\", \"position-relative number form-element\", 4, \"ngFor\", \"ngForOf\"], [1, \"center-text\", \"add-field\", 3, \"click\"], [\"src\", \"assets/icons/add.svg\"], [1, \"position-relative\", \"number\", \"form-element\"], [3, \"formGroupName\"], [1, \"number-name\"], [1, \"position-absolute\", \"number-container\"], [\"formControlName\", \"number\"], [3, \"options\", \"value\"], [\"jobOptions\", \"\"], [1, \"form-input\", \"center-text\"], [1, \"button\", \"gradient\", 2, \"display\", \"inline\", \"width\", \"80%\", \"padding\", \"5px\", 3, \"click\"], [3, \"options\", \"value\", \"valueChange\"], [\"labelOptions\", \"\"], [\"formArrayName\", \"UserProfile.Company.LabelForCompany\"], [\"class\", \"position-relative\", 4, \"ngFor\", \"ngForOf\"], [1, \"position-relative\"], [\"formControlName\", \"fileData\", 3, \"showtitle\", \"filename\"], [\"image\", \"\", 3, \"name\"]],\n  template: function ModifyProfileForm_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainerStart(0, 0);\n      i0.ɵɵlistener(\"indexChange\", function ModifyProfileForm_Template_ng_container_indexChange_0_listener($event) {\n        return ctx.index = $event;\n      });\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(1, ModifyProfileForm_ng_template_1_Template, 28, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(3, ModifyProfileForm_ng_template_3_Template, 69, 13, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(5, ModifyProfileForm_ng_template_5_Template, 11, 4, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵlistener(\"click\", function ModifyProfileForm_Template_div_click_9_listener() {\n        return ctx.slider.index = 0;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 6);\n      i0.ɵɵlistener(\"click\", function ModifyProfileForm_Template_div_click_10_listener() {\n        return ctx.slider.index = 1;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 6);\n      i0.ɵɵlistener(\"click\", function ModifyProfileForm_Template_div_click_11_listener() {\n        return ctx.slider.index = 2;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function ModifyProfileForm_Template_button_click_12_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(13, \" Enregistrer \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(2);\n\n      const _r2 = i0.ɵɵreference(4);\n\n      const _r4 = i0.ɵɵreference(6);\n\n      i0.ɵɵproperty(\"slides\", i0.ɵɵpureFunction3(10, _c0, _r0, _r2, _r4))(\"index\", ctx.index)(\"animate\", ctx.animate);\n      i0.ɵɵadvance(9);\n      i0.ɵɵclassProp(\"active\", ctx.slider ? ctx.slider.index == 0 : true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassProp(\"active\", ctx.slider && ctx.slider.index == 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassProp(\"active\", ctx.slider && ctx.slider.index == 2);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.form.invalid || null);\n    }\n  },\n  directives: [i2.SlidesDirective, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i4.ControlErrorsDirective, i5.NgIf, i6.UIRadioboxComponent, i6.UIRadioboxAccessor, i3.FormGroupName, i7.FileUI, i8.FileIcon, i3.FormArrayName, i5.NgForOf, i9.UINumberComponent, i10.OptionsModel],\n  styles: [\"[_ngcontent-%COMP%]:root{--notification-size: $notification-size}.section[_ngcontent-%COMP%], .page-content-with-tabs[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;touch-action:pan-y!important}.mid-sticky-footer[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;padding:10px 30px;width:100vw;height:calc(70px + env(safe-area-inset-bottom));padding-bottom:calc(constant(safe-area-inset-bottom) + 10px);padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}.page-content-with-tabs[_ngcontent-%COMP%]{margin-top:150px;margin-top:calc(constant(safe-area-inset-top) + 150px);margin-top:calc(env(safe-area-inset-top) + 150px);margin-bottom:0;margin-bottom:calc(constant(safe-area-inset-bottom) + 0);margin-bottom:calc(env(safe-area-inset-bottom) + 0);height:calc(100vh - 220px - env(safe-area-inset-bottom))}.invert[_ngcontent-%COMP%]{filter:invert(1)}[_nghost-%COMP%]{position:relative;width:100%;display:flex;flex-flow:column nowrap;flex-shrink:0}.form-title[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1em}.metiers[_ngcontent-%COMP%]   options[_ngcontent-%COMP%]{margin-bottom:20px}.number-name[_ngcontent-%COMP%]{display:block;white-space:pre;text-overflow:ellipsis;overflow:hidden;width:calc(100% - 90px)}.form-input[_ngcontent-%COMP%]   .number-container[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.section[_ngcontent-%COMP%]{flex:1;background-color:#fff}@media (min-width: 769px){.section[_ngcontent-%COMP%]{background:transparent}}.mid-sticky-footer[_ngcontent-%COMP%]{box-shadow:0 -3px 3px #ddd;background-color:#fff;height:calc(100px + env(safe-area-inset-bottom));padding:10px 30px;padding-bottom:calc(constant(safe-area-inset-bottom) + 10px);padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}.metiers[_ngcontent-%COMP%] > .form-element[_ngcontent-%COMP%]{border-bottom:2px solid #cdcfd0!important}.metiers[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]:focus-within{border-bottom-color:#2980b9!important}\"],\n  changeDetection: 0\n});\n\n__decorate([SnapshotAll('Label')], ModifyProfileForm.prototype, \"allLabels\", void 0);\n\n__decorate([SnapshotAll('Job')], ModifyProfileForm.prototype, \"allJobs\", void 0);\n\n;","map":null,"metadata":{},"sourceType":"module"}