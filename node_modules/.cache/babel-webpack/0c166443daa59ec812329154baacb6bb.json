{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { EventEmitter } from \"@angular/core\";\nimport { Clear, QueryAll } from \"src/models/new/data.state\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\n\nfunction UISuggestionBox_ng_container_0_ul_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 2);\n    i0.ɵɵlistener(\"click\", function UISuggestionBox_ng_container_0_ul_1_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const suggestion_r4 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(3);\n      return ctx_r6.choose(suggestion_r4);\n    });\n    i0.ɵɵelementStart(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \", \");\n    i0.ɵɵelementStart(4, \"em\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const suggestion_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(suggestion_r4.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(suggestion_r4.address);\n  }\n}\n\nfunction UISuggestionBox_ng_container_0_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, UISuggestionBox_ng_container_0_ul_1_li_1_Template, 6, 2, \"li\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const suggestions_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", suggestions_r1);\n  }\n}\n\nfunction UISuggestionBox_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, UISuggestionBox_ng_container_0_ul_1_Template, 2, 1, \"ul\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const suggestions_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showSuggestions && suggestions_r1.length);\n  }\n}\n\nexport class UISuggestionBox {\n  constructor(store, cd) {\n    this.store = store;\n    this.cd = cd;\n    this.query = '';\n    this.showSuggestions = false;\n    this.choice = new EventEmitter();\n    this.picked = false;\n    this.suggestions$.subscribe(console.log);\n  }\n\n  get nonFocusable() {\n    return -1;\n  }\n\n  set setQuery(query) {\n    if (!query) return;\n    this.picked = false;\n    this.query = query;\n    this.store.dispatch(new this.action(query)).subscribe(() => {\n      if (!this.picked && !this.showSuggestions) {\n        this.showSuggestions = true;\n        this.cd.markForCheck();\n      }\n    });\n  }\n\n  choose(suggestion) {\n    this.showSuggestions = false;\n    this.picked = true;\n    this.choice.emit(suggestion);\n    this.store.dispatch(new Clear('Establishments'));\n  }\n\n  hideSuggestions() {\n    this.showSuggestions = false;\n    this.cd.markForCheck();\n  }\n\n  cancel() {\n    this.hideSuggestions();\n    this.picked = false;\n  }\n\n}\n\nUISuggestionBox.ɵfac = function UISuggestionBox_Factory(t) {\n  return new (t || UISuggestionBox)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nUISuggestionBox.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UISuggestionBox,\n  selectors: [[\"suggestion-box\"]],\n  hostVars: 1,\n  hostBindings: function UISuggestionBox_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵattribute(\"tabindex\", ctx.nonFocusable);\n    }\n  },\n  inputs: {\n    setQuery: [\"query\", \"setQuery\"],\n    action: \"action\"\n  },\n  outputs: {\n    choice: \"choice\"\n  },\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n  template: function UISuggestionBox_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, UISuggestionBox_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.suggestions$));\n    }\n  },\n  styles: [\"[_ngcontent-%COMP%]:root {\\n  --notification-size: $notification-size;\\n}\\n\\n[_nghost-%COMP%] {\\n  width: 100%;\\n  position: absolute;\\n  z-index: 10;\\n  max-height: 300px;\\n  overflow: hidden auto;\\n  background: white;\\n}\\n\\nul[_ngcontent-%COMP%] {\\n  margin: 3px;\\n  padding: 20px 0;\\n  box-shadow: 0 4px 6px 0 #ccc;\\n}\\n\\nli[_ngcontent-%COMP%] {\\n  padding: 5px 20px;\\n}\\n\\nli[_ngcontent-%COMP%]:hover {\\n  background: #0D6191;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3N0eWxlcy9fdmFyaWFibGVzLnNjc3MiLCJzdWdnZXN0aW9uYm94LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3R0E7RUFFRSx1Q0FBQTtBQ3hHRjs7QUFDSTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLHFCQUFBO0VBQ0EsaUJBQUE7QUFFTjs7QUFDSTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsNEJBQUE7QUFFTjs7QUFDSTtFQUNFLGlCQUFBO0FBRU47O0FBQU07RUFDRSxtQkRsQmM7RUNtQmQsWUFBQTtBQUVSIiwiZmlsZSI6InN1Z2dlc3Rpb25ib3guY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4kbWFpbkNvbG9yOiAjMDAwMDAwO1xuJGxhbmRpbmdDb2xvcjogI2ZmZmZmZjtcbiRidXR0b25Db2xvcjogIzBDNUU4RDtcbiRzZWNvbmRhcnlCYWNrZ3JvdW5kOiAjMEQ2MTkxO1xuJGJ1dHRvbkdyYWRpZW50OiAkc2Vjb25kYXJ5QmFja2dyb3VuZDtcbiRmb3JtdWxhaXJlTWFpbkNvbG9yIDogIzA4MEYxODtcbiRleHRlcm5lbExpbmtzIDogIzBGNTU3QztcbiRzdWNjZXNDaXJjbGVTaGFkb3cgOiAjQ0RDRkQwO1xuJGluZm9zQ29sb3IgOiAjNTJEMUJEO1xuJGlucHV0LWltYWdlLW9mZnNldC14OiAyMHB4O1xuJGlucHV0LWltYWdlLW9mZnNldC15OiA1cHg7XG5cbiRwYWdpbmctaGVpZ2h0OiA3NXB4O1xuJHBhZ2luZy1kZWNvcmF0aW9uLWhlaWdodDogMTJweDtcblxuJG5hdmlnYXRpb24taGVpZ2h0OiA3MHB4O1xuXG4vLyBzcGFjaW5nXG4kaXRlbS1wYWRkaW5nOiAxMHB4O1xuJHBhZ2UtcGFkZGluZzogMzBweDtcbiR0aXRsZS1wYWRkaW5nOiAzMHB4O1xuJHNlY3Rpb24tbWFyZ2luOiAzMHB4O1xuJGhpZ2hsaWdodC1tYXJnaW46IDIwcHg7XG4kc3BhY2luZy1tYXJnaW46IDE1cHg7XG4kc21hbGwtc3BhY2luZy1tYXJnaW46IDEwcHg7XG4kYmlnLXNwYWNpbmctbWFyZ2luOiAyMHB4O1xuXG4kZm9ybS1pdGVtLXNwYWNpbmc6IDQwcHg7XG4kZm9ybS1ib3JkZXItYm90dG9tOiAycHggc29saWQgI2NkY2ZkMDsgXG5cblxuLy8gU3dpdGNoIGJveFxuJHN3aXRjaC1zaXplLXg6IDQwcHg7XG4kc3dpdGNoLXNpemUteTogMjBweDtcbiRzd2l0Y2gtcGFkZGluZzogMnB4O1xuJHN3aXRjaC1idXR0b24tc2l6ZTogbWluKCRzd2l0Y2gtc2l6ZS14LCAkc3dpdGNoLXNpemUteSkgLSAyICogJHN3aXRjaC1wYWRkaW5nO1xuJHN3aXRjaC1ncmFkaWVudC1zdGFydDogIzAwOUJFMDtcbiRzd2l0Y2gtZ3JhZGllbnQtZW5kOiAjNjlGMEFFO1xuXG4vLyBVSSBjaGVja2JveFxuJGJveC1zaXplOiAyNXB4O1xuJGJveC1wYWRkaW5nOiA4cHg7XG5cbi8vUHJvZmlsZSBwYWdlXG4kdGljay1zaXplLXg6IDNweDtcbiR0aWNrLXNpemUteTogMTBweDtcbiRwcm9maWxlLWxldmVsLXRoaWNrbmVzczogOHB4O1xuJHByb2ZpbGUtaW1hZ2Utc2l6ZTogMTUwcHggLSAyICogJHByb2ZpbGUtbGV2ZWwtdGhpY2tuZXNzO1xuJG5vdGlmaWNhdGlvbnMtcGFkZGluZzogMjBweDtcblxuLy9Td2lwZSB1cFxuJHN3aXBldXAtZGVjb3JhdGlvbi1oZWlnaHQ6IDUwcHg7XG5cbi8vIE1lZGlhXG4kZG9jdW1lbnQtaW1hZ2Utc2l6ZS14OiA5MHB4O1xuJHJhdGluZy1zdGFyLWhlaWdodDogMjVweDtcbiRyYXRpbmctc3Rhci13aWR0aDogMjVweDtcbiRzdGlja3ktaGVhZGVyLWhlaWdodDogNjBweDtcbiRuYXZpZ2F0aW9uLWFycm93LWljb24tc2l6ZTogMjVweDtcblxuJGljb24tc2l6ZTogMjVweDtcblxuXG4vLyBBdmFpbGliaWx0eSBDb2xvcnMgPT09PT0+XG4kYXZhaWxhYmxlIDogI0I5RURBRjtcbiRhdmFpbGFibGVXaXRoTGltaXRzIDogI0ZGQzQyNTtcbiR1bmF2YWlsYWJsZSA6ICNFODAwMDA7XG4kaWNvbi1wYWRkaW5nOiAycHg7XG5cbi8vc2VhcmNoLWJhclxuJHNlYXJjaGJhci1oZWlnaHQ6IDQ4cHg7XG4kc2VhcmNoYmFyLWljb24tc2l6ZTogMjRweDtcbiRzZWFyY2hiYXItaWNvbi1wYWRkaW5nOiAxMnB4O1xuJHNlYXJjaGJhci1wYWRkaW5nOiAxNnB4O1xuXG4vL3RhYlxuJHRhYi1oZWlnaHQ6IDQwcHg7XG4kdGFiLXBhZGRpbmc6IDEwcHg7XG4kdGFiLWRlZmF1bHQtYmFja2dyb3VuZDogI0U1RTVFNTtcbiR0YWItZGVmYXVsdC1jb2xvcjogIzlBOUE5QTtcbiR0YWItYWN0aXZlLWJhY2tncm91bmQ6IHdoaXRlO1xuJHRhYi1hY3RpdmUtY29sb3I6ICRzZWNvbmRhcnlCYWNrZ3JvdW5kO1xuJHRhYi1zcGFjaW5nOiA4cHg7XG5cbi8vaGVhZGVyXG4kbWlzc2lvbi1oZWFkZXItaGVpZ2h0OiAxNTBweDtcbi8vZm9vdGVyXG4kc3RpY2t5LWZvb3Rlci1oZWlnaHQ6IDcwcHg7XG4kbWlkLXN0aWNreS1mb290ZXItaGVpZ2h0OiAxMDBweDtcbiRiaWctc3RpY2t5LWZvb3Rlci1oZWlnaHQ6IDE0MHB4O1xuXG4vL1NPUyBjYXJkXG4kc29zLWNhcmQtaGVpZ2h0OiAxODBweDtcbiRzb3MtY2FyZC1wYWRkaW5nOiAxMHB4O1xuJHNvcy1ib3JkZXItdGhpY2tuZXNzOiA1cHg7XG5cbi8vQ29sbGFwc2VcbiRjb2xsYXBzZS1taW4taGVpZ2h0OiAzMDBweDtcbiRjb2xsYXBzZS1leHRyYS1oZWlnaHQ6IDMwcHg7XG5cbi8vTm90aWZpY2F0aW9uc1xuJG5vdGlmaWNhdGlvbi1zaXplOiAyMHB4O1xuXG46cm9vdCB7XG4gIC8vZGVmYXVsdCB2YWx1ZVxuICAtLW5vdGlmaWNhdGlvbi1zaXplOiAkbm90aWZpY2F0aW9uLXNpemU7XG59XG5cbi8vIHdlYiB2YXJpYWJsZXNcblxuJHdlYi1oZWFkZXItcGFkZGluZzogMTBweCAzMHB4O1xuJHdlYi1zdWItaGVhZGVyLXBhZGRpbmc6IDIwcHggNDBweDtcbiR3ZWItbG9nby1oZWlnaHQ6IDUwcHg7XG4kd2ViLWhlYWRlci1oZWlnaHQ6IDIxMHB4O1xuJGNvbC1vbmUtcGFkZGluZy14OiA0MHB4O1xuJGNvbC1vbmUtcGFkZGluZy15OiA0MHB4O1xuXG4vL2luZm9cbiRpbmZvLWhlaWdodDogMzBweDsiLCJcbiAgICBAaW1wb3J0ICdzcmMvc3R5bGVzL3ZhcmlhYmxlcyc7XG5cbiAgICA6aG9zdCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuIGF1dG87XG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICB9XG5cbiAgICB1bCB7XG4gICAgICBtYXJnaW46IDNweDtcbiAgICAgIHBhZGRpbmc6IDIwcHggMDtcbiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCAwICNjY2M7XG4gICAgfVxuXG4gICAgbGkge1xuICAgICAgcGFkZGluZzogNXB4IDIwcHg7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAkc2Vjb25kYXJ5QmFja2dyb3VuZDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuICAgIH1cbiAgIl19 */\"],\n  changeDetection: 0\n});\n\n__decorate([QueryAll('Establishments')], UISuggestionBox.prototype, \"suggestions$\", void 0);\n\n;","map":{"version":3,"sources":["/Users/jlw/Documents/frontBatiuni/src/app/shared/components/suggestionbox/suggestionbox.component.ts"],"names":["__decorate","EventEmitter","Clear","QueryAll","i0","i1","UISuggestionBox_ng_container_0_ul_1_li_1_Template","rf","ctx","_r7","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","UISuggestionBox_ng_container_0_ul_1_li_1_Template_li_click_0_listener","restoredCtx","ɵɵrestoreView","suggestion_r4","$implicit","ctx_r6","ɵɵnextContext","choose","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","name","address","UISuggestionBox_ng_container_0_ul_1_Template","ɵɵtemplate","suggestions_r1","ngIf","ɵɵproperty","UISuggestionBox_ng_container_0_Template","ɵɵelementContainerStart","ɵɵelementContainerEnd","ctx_r0","showSuggestions","length","UISuggestionBox","constructor","store","cd","query","choice","picked","suggestions$","subscribe","console","log","nonFocusable","setQuery","dispatch","action","markForCheck","suggestion","emit","hideSuggestions","cancel","ɵfac","UISuggestionBox_Factory","t","ɵɵdirectiveInject","Store","ChangeDetectorRef","ɵcmp","ɵɵdefineComponent","type","selectors","hostVars","hostBindings","UISuggestionBox_HostBindings","ɵɵattribute","inputs","outputs","decls","vars","consts","template","UISuggestionBox_Template","ɵɵpipe","ɵɵpipeBind1","styles","changeDetection","prototype"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,YAAT,QAA6B,eAA7B;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,2BAAhC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,aAApB;;AACA,SAASC,iDAAT,CAA2DC,EAA3D,EAA+DC,GAA/D,EAAoE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC9E,UAAME,GAAG,GAAGL,EAAE,CAACM,gBAAH,EAAZ;;AACAN,IAAAA,EAAE,CAACO,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B;AACAP,IAAAA,EAAE,CAACQ,UAAH,CAAc,OAAd,EAAuB,SAASC,qEAAT,GAAiF;AAAE,YAAMC,WAAW,GAAGV,EAAE,CAACW,aAAH,CAAiBN,GAAjB,CAApB;AAA2C,YAAMO,aAAa,GAAGF,WAAW,CAACG,SAAlC;AAA6C,YAAMC,MAAM,GAAGd,EAAE,CAACe,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOD,MAAM,CAACE,MAAP,CAAcJ,aAAd,CAAP;AAAsC,KAA5Q;AACAZ,IAAAA,EAAE,CAACO,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAP,IAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV;AACAjB,IAAAA,EAAE,CAACkB,YAAH;AACAlB,IAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV,EAAa,IAAb;AACAjB,IAAAA,EAAE,CAACO,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAP,IAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV;AACAjB,IAAAA,EAAE,CAACkB,YAAH;AACAlB,IAAAA,EAAE,CAACkB,YAAH;AACH;;AAAC,MAAIf,EAAE,GAAG,CAAT,EAAY;AACV,UAAMS,aAAa,GAAGR,GAAG,CAACS,SAA1B;AACAb,IAAAA,EAAE,CAACmB,SAAH,CAAa,CAAb;AACAnB,IAAAA,EAAE,CAACoB,iBAAH,CAAqBR,aAAa,CAACS,IAAnC;AACArB,IAAAA,EAAE,CAACmB,SAAH,CAAa,CAAb;AACAnB,IAAAA,EAAE,CAACoB,iBAAH,CAAqBR,aAAa,CAACU,OAAnC;AACH;AAAE;;AACH,SAASC,4CAAT,CAAsDpB,EAAtD,EAA0DC,GAA1D,EAA+D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACzEH,IAAAA,EAAE,CAACO,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAP,IAAAA,EAAE,CAACwB,UAAH,CAAc,CAAd,EAAiBtB,iDAAjB,EAAoE,CAApE,EAAuE,CAAvE,EAA0E,IAA1E,EAAgF,CAAhF;AACAF,IAAAA,EAAE,CAACkB,YAAH;AACH;;AAAC,MAAIf,EAAE,GAAG,CAAT,EAAY;AACV,UAAMsB,cAAc,GAAGzB,EAAE,CAACe,aAAH,GAAmBW,IAA1C;AACA1B,IAAAA,EAAE,CAACmB,SAAH,CAAa,CAAb;AACAnB,IAAAA,EAAE,CAAC2B,UAAH,CAAc,SAAd,EAAyBF,cAAzB;AACH;AAAE;;AACH,SAASG,uCAAT,CAAiDzB,EAAjD,EAAqDC,GAArD,EAA0D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACpEH,IAAAA,EAAE,CAAC6B,uBAAH,CAA2B,CAA3B;AACA7B,IAAAA,EAAE,CAACwB,UAAH,CAAc,CAAd,EAAiBD,4CAAjB,EAA+D,CAA/D,EAAkE,CAAlE,EAAqE,IAArE,EAA2E,CAA3E;AACAvB,IAAAA,EAAE,CAAC8B,qBAAH;AACH;;AAAC,MAAI3B,EAAE,GAAG,CAAT,EAAY;AACV,UAAMsB,cAAc,GAAGrB,GAAG,CAACsB,IAA3B;AACA,UAAMK,MAAM,GAAG/B,EAAE,CAACe,aAAH,EAAf;AACAf,IAAAA,EAAE,CAACmB,SAAH,CAAa,CAAb;AACAnB,IAAAA,EAAE,CAAC2B,UAAH,CAAc,MAAd,EAAsBI,MAAM,CAACC,eAAP,IAA0BP,cAAc,CAACQ,MAA/D;AACH;AAAE;;AACH,OAAO,MAAMC,eAAN,CAAsB;AACzBC,EAAAA,WAAW,CAACC,KAAD,EAAQC,EAAR,EAAY;AACnB,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKC,EAAL,GAAUA,EAAV;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKN,eAAL,GAAuB,KAAvB;AACA,SAAKO,MAAL,GAAc,IAAI1C,YAAJ,EAAd;AACA,SAAK2C,MAAL,GAAc,KAAd;AACA,SAAKC,YAAL,CAAkBC,SAAlB,CAA4BC,OAAO,CAACC,GAApC;AACH;;AACe,MAAZC,YAAY,GAAG;AAAE,WAAO,CAAC,CAAR;AAAY;;AACrB,MAARC,QAAQ,CAACR,KAAD,EAAQ;AAChB,QAAI,CAACA,KAAL,EACI;AACJ,SAAKE,MAAL,GAAc,KAAd;AACA,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKF,KAAL,CAAWW,QAAX,CAAoB,IAAI,KAAKC,MAAT,CAAgBV,KAAhB,CAApB,EAA4CI,SAA5C,CAAsD,MAAM;AACxD,UAAI,CAAC,KAAKF,MAAN,IAAgB,CAAC,KAAKR,eAA1B,EAA2C;AACvC,aAAKA,eAAL,GAAuB,IAAvB;AACA,aAAKK,EAAL,CAAQY,YAAR;AACH;AACJ,KALD;AAMH;;AAEDjC,EAAAA,MAAM,CAACkC,UAAD,EAAa;AACf,SAAKlB,eAAL,GAAuB,KAAvB;AACA,SAAKQ,MAAL,GAAc,IAAd;AACA,SAAKD,MAAL,CAAYY,IAAZ,CAAiBD,UAAjB;AACA,SAAKd,KAAL,CAAWW,QAAX,CAAoB,IAAIjD,KAAJ,CAAU,gBAAV,CAApB;AACH;;AACDsD,EAAAA,eAAe,GAAG;AACd,SAAKpB,eAAL,GAAuB,KAAvB;AACA,SAAKK,EAAL,CAAQY,YAAR;AACH;;AACDI,EAAAA,MAAM,GAAG;AACL,SAAKD,eAAL;AACA,SAAKZ,MAAL,GAAc,KAAd;AACH;;AArCwB;;AAuC7BN,eAAe,CAACoB,IAAhB,GAAuB,SAASC,uBAAT,CAAiCC,CAAjC,EAAoC;AAAE,SAAO,KAAKA,CAAC,IAAItB,eAAV,EAA2BlC,EAAE,CAACyD,iBAAH,CAAqBxD,EAAE,CAACyD,KAAxB,CAA3B,EAA2D1D,EAAE,CAACyD,iBAAH,CAAqBzD,EAAE,CAAC2D,iBAAxB,CAA3D,CAAP;AAAgH,CAA7K;;AACAzB,eAAe,CAAC0B,IAAhB,GAAuB,aAAc5D,EAAE,CAAC6D,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE5B,eAAR;AAAyB6B,EAAAA,SAAS,EAAE,CAAC,CAAC,gBAAD,CAAD,CAApC;AAA0DC,EAAAA,QAAQ,EAAE,CAApE;AAAuEC,EAAAA,YAAY,EAAE,SAASC,4BAAT,CAAsC/D,EAAtC,EAA0CC,GAA1C,EAA+C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACpMH,MAAAA,EAAE,CAACmE,WAAH,CAAe,UAAf,EAA2B/D,GAAG,CAACyC,YAA/B;AACH;AAAE,GAFmD;AAEjDuB,EAAAA,MAAM,EAAE;AAAEtB,IAAAA,QAAQ,EAAE,CAAC,OAAD,EAAU,UAAV,CAAZ;AAAmCE,IAAAA,MAAM,EAAE;AAA3C,GAFyC;AAEcqB,EAAAA,OAAO,EAAE;AAAE9B,IAAAA,MAAM,EAAE;AAAV,GAFvB;AAE6C+B,EAAAA,KAAK,EAAE,CAFpD;AAEuDC,EAAAA,IAAI,EAAE,CAF7D;AAEgEC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,CAAD,EAAc,CAAC,CAAD,EAAI,OAAJ,EAAa,CAAb,EAAgB,OAAhB,EAAyB,SAAzB,CAAd,EAAmD,CAAC,CAAD,EAAI,OAAJ,CAAnD,CAFxE;AAE0IC,EAAAA,QAAQ,EAAE,SAASC,wBAAT,CAAkCvE,EAAlC,EAAsCC,GAAtC,EAA2C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC/PH,MAAAA,EAAE,CAACwB,UAAH,CAAc,CAAd,EAAiBI,uCAAjB,EAA0D,CAA1D,EAA6D,CAA7D,EAAgE,cAAhE,EAAgF,CAAhF;AACA5B,MAAAA,EAAE,CAAC2E,MAAH,CAAU,CAAV,EAAa,OAAb;AACH;;AAAC,QAAIxE,EAAE,GAAG,CAAT,EAAY;AACVH,MAAAA,EAAE,CAAC2B,UAAH,CAAc,MAAd,EAAsB3B,EAAE,CAAC4E,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqBxE,GAAG,CAACqC,YAAzB,CAAtB;AACH;AAAE,GAPmD;AAOjDoC,EAAAA,MAAM,EAAE,CAAC,44JAAD,CAPyC;AAOu2JC,EAAAA,eAAe,EAAE;AAPx3J,CAArB,CAArC;;AAQAlF,UAAU,CAAC,CACPG,QAAQ,CAAC,gBAAD,CADD,CAAD,EAEPmC,eAAe,CAAC6C,SAFT,EAEoB,cAFpB,EAEoC,KAAK,CAFzC,CAAV;;AAGA","sourcesContent":["import { __decorate } from \"tslib\";\nimport { EventEmitter } from \"@angular/core\";\nimport { Clear, QueryAll } from \"src/models/new/data.state\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngxs/store\";\nfunction UISuggestionBox_ng_container_0_ul_1_li_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 2);\n    i0.ɵɵlistener(\"click\", function UISuggestionBox_ng_container_0_ul_1_li_1_Template_li_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r7); const suggestion_r4 = restoredCtx.$implicit; const ctx_r6 = i0.ɵɵnextContext(3); return ctx_r6.choose(suggestion_r4); });\n    i0.ɵɵelementStart(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \", \");\n    i0.ɵɵelementStart(4, \"em\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const suggestion_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(suggestion_r4.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(suggestion_r4.address);\n} }\nfunction UISuggestionBox_ng_container_0_ul_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, UISuggestionBox_ng_container_0_ul_1_li_1_Template, 6, 2, \"li\", 1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const suggestions_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", suggestions_r1);\n} }\nfunction UISuggestionBox_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, UISuggestionBox_ng_container_0_ul_1_Template, 2, 1, \"ul\", 0);\n    i0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const suggestions_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showSuggestions && suggestions_r1.length);\n} }\nexport class UISuggestionBox {\n    constructor(store, cd) {\n        this.store = store;\n        this.cd = cd;\n        this.query = '';\n        this.showSuggestions = false;\n        this.choice = new EventEmitter();\n        this.picked = false;\n        this.suggestions$.subscribe(console.log);\n    }\n    get nonFocusable() { return -1; }\n    set setQuery(query) {\n        if (!query)\n            return;\n        this.picked = false;\n        this.query = query;\n        this.store.dispatch(new this.action(query)).subscribe(() => {\n            if (!this.picked && !this.showSuggestions) {\n                this.showSuggestions = true;\n                this.cd.markForCheck();\n            }\n        });\n    }\n    ;\n    choose(suggestion) {\n        this.showSuggestions = false;\n        this.picked = true;\n        this.choice.emit(suggestion);\n        this.store.dispatch(new Clear('Establishments'));\n    }\n    hideSuggestions() {\n        this.showSuggestions = false;\n        this.cd.markForCheck();\n    }\n    cancel() {\n        this.hideSuggestions();\n        this.picked = false;\n    }\n}\nUISuggestionBox.ɵfac = function UISuggestionBox_Factory(t) { return new (t || UISuggestionBox)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\nUISuggestionBox.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: UISuggestionBox, selectors: [[\"suggestion-box\"]], hostVars: 1, hostBindings: function UISuggestionBox_HostBindings(rf, ctx) { if (rf & 2) {\n        i0.ɵɵattribute(\"tabindex\", ctx.nonFocusable);\n    } }, inputs: { setQuery: [\"query\", \"setQuery\"], action: \"action\" }, outputs: { choice: \"choice\" }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"]], template: function UISuggestionBox_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, UISuggestionBox_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n        i0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.suggestions$));\n    } }, styles: [\"[_ngcontent-%COMP%]:root {\\n  --notification-size: $notification-size;\\n}\\n\\n[_nghost-%COMP%] {\\n  width: 100%;\\n  position: absolute;\\n  z-index: 10;\\n  max-height: 300px;\\n  overflow: hidden auto;\\n  background: white;\\n}\\n\\nul[_ngcontent-%COMP%] {\\n  margin: 3px;\\n  padding: 20px 0;\\n  box-shadow: 0 4px 6px 0 #ccc;\\n}\\n\\nli[_ngcontent-%COMP%] {\\n  padding: 5px 20px;\\n}\\n\\nli[_ngcontent-%COMP%]:hover {\\n  background: #0D6191;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3N0eWxlcy9fdmFyaWFibGVzLnNjc3MiLCJzdWdnZXN0aW9uYm94LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3R0E7RUFFRSx1Q0FBQTtBQ3hHRjs7QUFDSTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLHFCQUFBO0VBQ0EsaUJBQUE7QUFFTjs7QUFDSTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsNEJBQUE7QUFFTjs7QUFDSTtFQUNFLGlCQUFBO0FBRU47O0FBQU07RUFDRSxtQkRsQmM7RUNtQmQsWUFBQTtBQUVSIiwiZmlsZSI6InN1Z2dlc3Rpb25ib3guY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4kbWFpbkNvbG9yOiAjMDAwMDAwO1xuJGxhbmRpbmdDb2xvcjogI2ZmZmZmZjtcbiRidXR0b25Db2xvcjogIzBDNUU4RDtcbiRzZWNvbmRhcnlCYWNrZ3JvdW5kOiAjMEQ2MTkxO1xuJGJ1dHRvbkdyYWRpZW50OiAkc2Vjb25kYXJ5QmFja2dyb3VuZDtcbiRmb3JtdWxhaXJlTWFpbkNvbG9yIDogIzA4MEYxODtcbiRleHRlcm5lbExpbmtzIDogIzBGNTU3QztcbiRzdWNjZXNDaXJjbGVTaGFkb3cgOiAjQ0RDRkQwO1xuJGluZm9zQ29sb3IgOiAjNTJEMUJEO1xuJGlucHV0LWltYWdlLW9mZnNldC14OiAyMHB4O1xuJGlucHV0LWltYWdlLW9mZnNldC15OiA1cHg7XG5cbiRwYWdpbmctaGVpZ2h0OiA3NXB4O1xuJHBhZ2luZy1kZWNvcmF0aW9uLWhlaWdodDogMTJweDtcblxuJG5hdmlnYXRpb24taGVpZ2h0OiA3MHB4O1xuXG4vLyBzcGFjaW5nXG4kaXRlbS1wYWRkaW5nOiAxMHB4O1xuJHBhZ2UtcGFkZGluZzogMzBweDtcbiR0aXRsZS1wYWRkaW5nOiAzMHB4O1xuJHNlY3Rpb24tbWFyZ2luOiAzMHB4O1xuJGhpZ2hsaWdodC1tYXJnaW46IDIwcHg7XG4kc3BhY2luZy1tYXJnaW46IDE1cHg7XG4kc21hbGwtc3BhY2luZy1tYXJnaW46IDEwcHg7XG4kYmlnLXNwYWNpbmctbWFyZ2luOiAyMHB4O1xuXG4kZm9ybS1pdGVtLXNwYWNpbmc6IDQwcHg7XG4kZm9ybS1ib3JkZXItYm90dG9tOiAycHggc29saWQgI2NkY2ZkMDsgXG5cblxuLy8gU3dpdGNoIGJveFxuJHN3aXRjaC1zaXplLXg6IDQwcHg7XG4kc3dpdGNoLXNpemUteTogMjBweDtcbiRzd2l0Y2gtcGFkZGluZzogMnB4O1xuJHN3aXRjaC1idXR0b24tc2l6ZTogbWluKCRzd2l0Y2gtc2l6ZS14LCAkc3dpdGNoLXNpemUteSkgLSAyICogJHN3aXRjaC1wYWRkaW5nO1xuJHN3aXRjaC1ncmFkaWVudC1zdGFydDogIzAwOUJFMDtcbiRzd2l0Y2gtZ3JhZGllbnQtZW5kOiAjNjlGMEFFO1xuXG4vLyBVSSBjaGVja2JveFxuJGJveC1zaXplOiAyNXB4O1xuJGJveC1wYWRkaW5nOiA4cHg7XG5cbi8vUHJvZmlsZSBwYWdlXG4kdGljay1zaXplLXg6IDNweDtcbiR0aWNrLXNpemUteTogMTBweDtcbiRwcm9maWxlLWxldmVsLXRoaWNrbmVzczogOHB4O1xuJHByb2ZpbGUtaW1hZ2Utc2l6ZTogMTUwcHggLSAyICogJHByb2ZpbGUtbGV2ZWwtdGhpY2tuZXNzO1xuJG5vdGlmaWNhdGlvbnMtcGFkZGluZzogMjBweDtcblxuLy9Td2lwZSB1cFxuJHN3aXBldXAtZGVjb3JhdGlvbi1oZWlnaHQ6IDUwcHg7XG5cbi8vIE1lZGlhXG4kZG9jdW1lbnQtaW1hZ2Utc2l6ZS14OiA5MHB4O1xuJHJhdGluZy1zdGFyLWhlaWdodDogMjVweDtcbiRyYXRpbmctc3Rhci13aWR0aDogMjVweDtcbiRzdGlja3ktaGVhZGVyLWhlaWdodDogNjBweDtcbiRuYXZpZ2F0aW9uLWFycm93LWljb24tc2l6ZTogMjVweDtcblxuJGljb24tc2l6ZTogMjVweDtcblxuXG4vLyBBdmFpbGliaWx0eSBDb2xvcnMgPT09PT0+XG4kYXZhaWxhYmxlIDogI0I5RURBRjtcbiRhdmFpbGFibGVXaXRoTGltaXRzIDogI0ZGQzQyNTtcbiR1bmF2YWlsYWJsZSA6ICNFODAwMDA7XG4kaWNvbi1wYWRkaW5nOiAycHg7XG5cbi8vc2VhcmNoLWJhclxuJHNlYXJjaGJhci1oZWlnaHQ6IDQ4cHg7XG4kc2VhcmNoYmFyLWljb24tc2l6ZTogMjRweDtcbiRzZWFyY2hiYXItaWNvbi1wYWRkaW5nOiAxMnB4O1xuJHNlYXJjaGJhci1wYWRkaW5nOiAxNnB4O1xuXG4vL3RhYlxuJHRhYi1oZWlnaHQ6IDQwcHg7XG4kdGFiLXBhZGRpbmc6IDEwcHg7XG4kdGFiLWRlZmF1bHQtYmFja2dyb3VuZDogI0U1RTVFNTtcbiR0YWItZGVmYXVsdC1jb2xvcjogIzlBOUE5QTtcbiR0YWItYWN0aXZlLWJhY2tncm91bmQ6IHdoaXRlO1xuJHRhYi1hY3RpdmUtY29sb3I6ICRzZWNvbmRhcnlCYWNrZ3JvdW5kO1xuJHRhYi1zcGFjaW5nOiA4cHg7XG5cbi8vaGVhZGVyXG4kbWlzc2lvbi1oZWFkZXItaGVpZ2h0OiAxNTBweDtcbi8vZm9vdGVyXG4kc3RpY2t5LWZvb3Rlci1oZWlnaHQ6IDcwcHg7XG4kbWlkLXN0aWNreS1mb290ZXItaGVpZ2h0OiAxMDBweDtcbiRiaWctc3RpY2t5LWZvb3Rlci1oZWlnaHQ6IDE0MHB4O1xuXG4vL1NPUyBjYXJkXG4kc29zLWNhcmQtaGVpZ2h0OiAxODBweDtcbiRzb3MtY2FyZC1wYWRkaW5nOiAxMHB4O1xuJHNvcy1ib3JkZXItdGhpY2tuZXNzOiA1cHg7XG5cbi8vQ29sbGFwc2VcbiRjb2xsYXBzZS1taW4taGVpZ2h0OiAzMDBweDtcbiRjb2xsYXBzZS1leHRyYS1oZWlnaHQ6IDMwcHg7XG5cbi8vTm90aWZpY2F0aW9uc1xuJG5vdGlmaWNhdGlvbi1zaXplOiAyMHB4O1xuXG46cm9vdCB7XG4gIC8vZGVmYXVsdCB2YWx1ZVxuICAtLW5vdGlmaWNhdGlvbi1zaXplOiAkbm90aWZpY2F0aW9uLXNpemU7XG59XG5cbi8vIHdlYiB2YXJpYWJsZXNcblxuJHdlYi1oZWFkZXItcGFkZGluZzogMTBweCAzMHB4O1xuJHdlYi1zdWItaGVhZGVyLXBhZGRpbmc6IDIwcHggNDBweDtcbiR3ZWItbG9nby1oZWlnaHQ6IDUwcHg7XG4kd2ViLWhlYWRlci1oZWlnaHQ6IDIxMHB4O1xuJGNvbC1vbmUtcGFkZGluZy14OiA0MHB4O1xuJGNvbC1vbmUtcGFkZGluZy15OiA0MHB4O1xuXG4vL2luZm9cbiRpbmZvLWhlaWdodDogMzBweDsiLCJcbiAgICBAaW1wb3J0ICdzcmMvc3R5bGVzL3ZhcmlhYmxlcyc7XG5cbiAgICA6aG9zdCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuIGF1dG87XG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICB9XG5cbiAgICB1bCB7XG4gICAgICBtYXJnaW46IDNweDtcbiAgICAgIHBhZGRpbmc6IDIwcHggMDtcbiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCAwICNjY2M7XG4gICAgfVxuXG4gICAgbGkge1xuICAgICAgcGFkZGluZzogNXB4IDIwcHg7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAkc2Vjb25kYXJ5QmFja2dyb3VuZDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuICAgIH1cbiAgIl19 */\"], changeDetection: 0 });\n__decorate([\n    QueryAll('Establishments')\n], UISuggestionBox.prototype, \"suggestions$\", void 0);\n;\n"]},"metadata":{},"sourceType":"module"}