{"ast":null,"code":"import { map } from \"rxjs/operators\";\nimport { SlideTemplate } from \"../../directives/slideTemplate.directive\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/file-downloader.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"../profile-image/profile-image.component\";\nimport * as i4 from \"../../directives/slideTemplate.directive\";\nimport * as i5 from \"@angular/common\";\n\nfunction SuiviComments_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"img\", 14);\n    i0.ɵɵlistener(\"click\", function SuiviComments_ng_container_10_Template_img_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.slides.slide(\"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"img\", 15);\n    i0.ɵɵlistener(\"click\", function SuiviComments_ng_container_10_Template_img_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.slides.slide(\"right\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hidden\", ctx_r0.slides.first);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hidden\", ctx_r0.slides.last);\n  }\n}\n\nfunction SuiviComments_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵprojection(1);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SuiviComments_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 17);\n  }\n\n  if (rf & 2) {\n    const src_r7 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r3.getImage(src_r7) || \"assets/unavailable.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nconst _c0 = [[[\"comment-suivi\"]]];\nconst _c1 = [\"comment-suivi\"];\nexport let SuiviComments = /*#__PURE__*/(() => {\n  class SuiviComments {\n    constructor(downloader, sanitizer) {\n      this.downloader = downloader;\n      this.sanitizer = sanitizer;\n      this.parentComment = null;\n      this.supervision = {\n        id: -1,\n        author: 'Gabriel Dubois',\n        date: '13/11/2021',\n        comment: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\n        files: []\n      };\n    }\n\n    ngOnInit() {\n      console.log(this.slides);\n    }\n\n    get manyFiles() {\n      return this.supervision.files.length > 1;\n    }\n\n    slide(k) {//download fields on the go\n    }\n\n    getImage(file) {\n      if (!file) return null;\n      if (file.content) return this.downloader.toSecureBase64(file);\n      return this.downloader.downloadFile(file).pipe(map(file => this.downloader.toSecureBase64(file)));\n    }\n\n  }\n\n  SuiviComments.ɵfac = function SuiviComments_Factory(t) {\n    return new (t || SuiviComments)(i0.ɵɵdirectiveInject(i1.FileDownloader), i0.ɵɵdirectiveInject(i2.DomSanitizer));\n  };\n\n  SuiviComments.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SuiviComments,\n    selectors: [[\"comment-suivi\"]],\n    contentQueries: function SuiviComments_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, SuiviComments, 5, SuiviComments);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.parentComment = _t.first);\n      }\n    },\n    viewQuery: function SuiviComments_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(SlideTemplate, 7, SlideTemplate);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.slides = _t.first);\n      }\n    },\n    inputs: {\n      supervision: \"supervision\"\n    },\n    ngContentSelectors: _c1,\n    decls: 19,\n    vars: 7,\n    consts: [[1, \"comment-provider\", \"flex\", \"center-cross\"], [1, \"user-image\"], [1, \"user-info\"], [1, \"user-name\"], [1, \"post-date\"], [1, \"comment-image\", \"position-relative\"], [1, \"cover-parent\", 3, \"slide-template\", \"contexts\"], [4, \"ngIf\"], [1, \"suivi-comment\"], [\"class\", \"parent-comment\", 4, \"ngIf\"], [1, \"response\", \"flex\", \"center\"], [\"type\", \"text\", \"placeholder\", \"Ajouter une commentaire\"], [\"src\", \"assets/camera.png\"], [\"image\", \"\"], [\"src\", \"assets/arrowleft.svg\", 1, \"position-absolute\", \"left\", 3, \"click\"], [\"src\", \"assets/arrowright.svg\", 1, \"position-absolute\", \"right\", 3, \"click\"], [1, \"parent-comment\"], [1, \"main\", 3, \"src\"]],\n    template: function SuiviComments_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef(_c0);\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"profile-image\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"span\", 4);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵelement(9, \"div\", 6);\n        i0.ɵɵtemplate(10, SuiviComments_ng_container_10_Template, 3, 4, \"ng-container\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, SuiviComments_div_13_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementStart(14, \"div\", 10);\n        i0.ɵɵelement(15, \"input\", 11);\n        i0.ɵɵelement(16, \"img\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, SuiviComments_ng_template_17_Template, 1, 1, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(18);\n\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.supervision.author);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Le \", ctx.supervision.date, \" \\u00E0 18h36m\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"slide-template\", _r2)(\"contexts\", ctx.supervision.files);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.supervision.comment, \"\\n\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.parentComment);\n      }\n    },\n    directives: [i3.UIProfileImageComponent, i4.SlideTemplate, i5.NgIf],\n    styles: [\"[_ngcontent-%COMP%]:root{--notification-size: $notification-size}.comment-image[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .comment-image[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}.page-content-with-tabs[_ngcontent-%COMP%]{width:100%;overflow-y:auto;overflow-x:hidden;touch-action:pan-y!important}.page-content-with-tabs[_ngcontent-%COMP%]{margin-top:150px;margin-top:calc(constant(safe-area-inset-top) + 150px);margin-top:calc(env(safe-area-inset-top) + 150px);margin-bottom:0;margin-bottom:calc(constant(safe-area-inset-bottom) + 0);margin-bottom:calc(env(safe-area-inset-bottom) + 0);height:calc(100vh - 220px - env(safe-area-inset-bottom))}.invert[_ngcontent-%COMP%]{filter:invert(1)}[_nghost-%COMP%]{display:block;border:1px solid #C7C7C7;padding:0}.user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:.9em}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3em}.user-info[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-weight:200}.comment-provider[_ngcontent-%COMP%]{height:100px}.user-image[_ngcontent-%COMP%]{transform:scale(.5) rotate(45deg);margin:0}.comment-image[_ngcontent-%COMP%]   img.main[_ngcontent-%COMP%]{height:225px;width:100%;object-fit:contain}.comment-image[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{left:8px}.comment-image[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{right:8px}.suivi-comment[_ngcontent-%COMP%], .parent-comment[_ngcontent-%COMP%]{border-bottom:inherit;padding:8px;line-height:1.5em}.parent-comment[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.response[_ngcontent-%COMP%]{justify-content:space-between;padding:8px}.response[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;white-space:normal}.hidden[_ngcontent-%COMP%]{display:none}\"],\n    changeDetection: 0\n  });\n  return SuiviComments;\n})();","map":null,"metadata":{},"sourceType":"module"}