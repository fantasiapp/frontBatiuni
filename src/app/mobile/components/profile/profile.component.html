<!--Configure role accordingly-->
<ng-container *ngIf="(user$ | async) as user">
  <header class="clear-margin full-width sticky-header flex center-cross">
    <span class="grow text-light-emphasis">Mon Profil</span>
    <img src="assets/notification.svg" (click)="openNotifications = true" />
    <img src="assets/menu.svg" (click)="openMenu = true" />
  </header>

  <extended-profile class="page-content" [user]="user" (ratingsClicked)="openRatings = true" (profileChanged)="changeProfileType($event)">

  </extended-profile>

  <swipeup [(open)]="openMenu">
    <li (click)="slideModifyMenu(false)">Modifier mon profil</li>
    <li (click)="slideModifyMenu(true)">Modifier mon mot de passe</li>
    <li>Candidatures en cours</li>
    <li [routerLink]="['','abonnement']">Gérer mes abonnements</li>
    <li [routerLink]="['','factures']">Mes factures</li>
    <li>Partager l'application</li>
    <li>Noter l'application</li>
    <li>Nous contacter</li>
    <li>FAQ</li>
    <li>Mentions légales</li>
    <li (click)="logout()">Se déconnecter</li>
  </swipeup>

  <slidemenu [(open)]="openModifyMenu" #modifyMenu>    
    <span header>Modifier mon Profil</span>
    <div class="modify-page hosted-page flex column center-cross space-children-margin" content>
      <swipeup [(open)]="openModifyPicture" #modifyPicture>
        <li (click)="takePhoto()">Accédez à l'appareil photo</li>
        <li (click)="selectPhoto()">Télécharger une image</li>
      </swipeup>

      <profile-resume [company]="user.profile!.company" [canChangePicture]="!modifyPassword" class="flex column center-cross space-children-margin" (changePicture)="swipeModifyPicture()"></profile-resume>
  
      <div class="form-container full-width grow flex column position-relative">
        <modify-password-form *ngIf="modifyPassword" class="grow" (submitted)="changePassword($event)"></modify-password-form>
        <modify-profile-form [user]="user.profile!" *ngIf="!modifyPassword" class="grow" (submitted)="modifyProfile($event)" #modifyForm></modify-profile-form>
      </div>
    </div>
  </slidemenu>

  <slidemenu [(open)]="openRatings">
    <div class="full-width center-text text-emphasis" header>Mes notes</div>
    <div class="hosted-page flex column center-cross space-children-margin" content>

      <profile-resume [company]="user.profile!.company" class="flex column center-cross space-children-margin"></profile-resume>

      <span class="full-width section " style="text-align: center;font-size: 12px; margin-bottom: 10px;">Demander une
        recommandation</span>
      <section class="full-width section modify-profile">
        <div class="company-rate">
          <span class="company-name">SARL</span>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>

          </div>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>

          </div>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>
          </div>
        </div>
        <div class="company-rate">
          <span class="company-name">SARL</span>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>

          </div>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>

          </div>
          <div class="criterion ">
            <div class="flex center-cross">
              <span class="criterion-stars">CRITERE 1
              </span>
              <stars class="stars" value="3.9"></stars>
            </div>

            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
              et dolore</span>
          </div>
        </div>
      </section>
    </div>
  </slidemenu>
  <slidemenu [(open)]="openNotifications">
    <div class="full-width center-text text-emphasis" header>Notifications</div>
    <notifications class="hosted-page flex column center-cross space-children-margin" content></notifications>
  </slidemenu>
</ng-container>