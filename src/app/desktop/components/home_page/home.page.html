<ng-container *ngIf="user$ | async as user">
  <tabs [tabs]="user.viewType ? 3 : 2" [(activeView)]="activeView" bottom>
    <span tab_0>{{ user.viewType ? 'Brouillon' : 'Vue liste' }}</span>
    <span tab_1>{{ user.viewType ? 'En ligne' : 'Carte' }}</span>
    <span tab_2>Validées</span>
  </tabs>
  
  <div class="web-page">
    <section class="filters">
      <div class="header">
        <img src="assets/Filtrer par.svg"/> Filtrer par
      </div>
      <pme-filter-form [activeView]="activeView"></pme-filter-form>
    </section>
    <ng-container *ngIf="user.viewType; else stview">
    <section class="main web-content font-Poppins">
      <searchbar [placeholder]="activeView == 0 ? 'Recheche brouillon...' : activeView == 1 ? 'Recheche annonces enligne...' :  'Recheche annonces validées'"></searchbar>
      <div class="report-search">
        Resultat <span class="no-result">{{ viewPostLength() }}</span>
      </div>
    <!-- Page pme -->
      <div class="results space-children-margin">
        <ng-container [ngSwitch]="activeView">
          <ng-container *ngSwitchCase="0">
            <offer
              *ngFor="let draft of userDrafts"
              src="assets/brouillon.svg"
              [deletable]="true"
              [post]="draft"
              (click)="openPost(draft)"
              ></offer> 
          </ng-container>
          <ng-container *ngSwitchCase="1">
            <offer
              *ngFor="let onlinePost of userOnlinePosts"
              [deletable]="false"
              src="assets/enligne.svg"
              ></offer>
          </ng-container>
          <ng-container *ngSwitchCase="2">
            <offer
              [deletable]="false"
              *ngFor="let mission of annonces"
              src="assets/validée.svg"
              ></offer>
          </ng-container>
        </ng-container>
      </div>

     <!-- pAGE ST -->
    </section>
  </ng-container>
  <ng-template #stview>
    <ng-container [ngSwitch]="activeView">
      <ng-container *ngSwitchCase="0">
        <section class="main web-content font-Poppins">
          <offer
              *ngFor="let onlinePost of userOnlinePosts"
              [deletable]="false"
              src="assets/enligne.svg"
              ></offer>
        </section>
      </ng-container>
      <ng-container *ngSwitchCase="1">
        <mapbox-batiuni></mapbox-batiuni>
      </ng-container>
    </ng-container>
  </ng-template>
  </div>


</ng-container>