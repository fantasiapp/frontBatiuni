<ng-container *ngIf="user$ | async as user">
  <page-header name="Annonces qui peuvent vous intéresser" [tabs]="user.type ? 3 : 2" [(activeView)]="activeView" (filterClicked)="openAdFilterMenu = true">
    <span tab_0>{{ user.type ? 'Brouillon' : 'Vue liste' }}</span>
    <span tab_1>{{ user.type ? 'En ligne' : 'Carte' }}</span>
    <span tab_2>Validées</span>
  </page-header>
  
  <div class="hosted-page space-children-margin page-content-with-tabs">
    <ng-container [ngSwitch]="activeView">
      <ng-container *ngSwitchCase="0">
        <offer *ngFor="let mission of annonces" [routerLink]="user.type ? ['', 'brouillon'] : null"></offer>
      </ng-container>
      <mapbox-batiuni class="space-children-margin" *ngSwitchCase="1"></mapbox-batiuni>
    </ng-container>
  </div>
  
  <swipeup [(open)]="openAdFilterMenu" type="view">
    <pme-filter-form *ngIf="user.type; else stfilter" view></pme-filter-form>
    <ng-template #stfilter>
      <st-filter-form></st-filter-form>
    </ng-template>
  </swipeup>
</ng-container>